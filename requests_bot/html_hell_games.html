<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:wicket="http://git-wip-us.apache.org/repos/asf/wicket/repo?p=wicket.git;a=blob_plain;f=wicket-core/src/main/resources/META-INF/wicket-1.5.xsd;hb=master">
<head><script type="text/javascript" >
/*<![CDATA[*/

(() => {
    'use strict';

    console.warn('Starting variables definition', 'https://vmmo.vten.ru/basin/combat?10');

    if (!window.ptxTimestamp) {
        window.ptxTimestamp = Number(new Date());
    }

    if (window.ptxWebGLAllowed === undefined) {
        try {
            const canvas = document.createElement('canvas')
            window.ptxWebGLAllowed = !!window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl'))
        } catch (e) {
            window.ptxWebGLAllowed = false
        }
    }

    window.ptxUserLoggedInJustNow = false;
    window.ptxPageId = 10;
    window.ptxShadowsLang = 'ru';
    window.ptxShadowsCountry = 'RU';
    window.ptxShadowsLocale = 'ru-RU';
    window.ptxShadowsCssVS = '?v=1765963391098';
    window.ptxShadowsCssVP = '&v=1765963391098';
    window.ptxIsERLogged = true;
    window.ptxComeFromCombatPage = window.ptxIsCombatPage === true;
    window.ptxIsCombatPage = true;
    window.ptxIsCityPage = false;
    window.ptxPageUrl = 'https://vmmo.vten.ru/basin/combat?10';
    window.ptxPageUrlPPF5 = 'https://vmmo.vten.ru/basin/combat?10';
    window.ptxPagePath = 'https://vmmo.vten.ru/basin/combat';
    window.ptxPageUrlCln = 'https://vmmo.vten.ru/basin/combat?10';
    window.ptxPagePathCln = 'https://vmmo.vten.ru/basin/combat';
    window.ptxPageRenderedPingUrl = 'https://vmmo.vten.ru/basin/combat?10-IEndpointBehaviorListener.5-';
    window.ptxPageHomeUrl = 'https://vmmo.vten.ru/';
    window.ptxJSessionId = '8095DD544584FDFF87D231FD2A3F1FB1';
    window.ptxSoundSettingOnReportUrl = 'https://vmmo.vten.ru/user/settings/sound/true';
    window.ptxSoundSettingOffReportUrl = 'https://vmmo.vten.ru/user/settings/sound/false';
    window.ptxEventReportUrl = 'https://vmmo.vten.ru/tech/report/ev';
    window.ptxLogsOn = false || false;
    window.ptxIgnoreWebView = false;
    window.ptxBackButtonOverrideAllowed = true;
    window.ptxActualTimestampPostfix = 1765963391098;
    window.ptxUserLogin = '239299464#Qing Dynasty';
    window.ptxUserId = '239299464';
    window.ptxUserLevel = 29;
    window.ptxYmCounterId = '94691268';
    window.ptxComeAsSPA = false;
    window.ptxVmmoWidgetsRestricted = false;
    window.ptxGoogleStatsRestricted = true;
    window.ptxPlayerUserPresent = true;

    window.ptxPageWasUpdated = (
        window.ptxVmmoWidgetsRestrictedStored !== undefined
            && window.ptxVmmoWidgetsRestrictedStored !== ptxVmmoWidgetsRestricted
    ) || (
        window.ptxGoogleStatsRestrictedStored !== undefined
            && window.ptxGoogleStatsRestrictedStored !== ptxGoogleStatsRestricted
    );

    // console.info(window.ptxPageWasUpdated, window.ptxGoogleStatsRestricted, window.ptxGoogleStatsRestrictedStored, window.ptxVmmoWidgetsRestricted, window.ptxVmmoWidgetsRestrictedStored);

    window.ptxVmmoWidgetsRestrictedStored = ptxVmmoWidgetsRestricted;
    window.ptxGoogleStatsRestrictedStored = ptxGoogleStatsRestricted;

    console.warn('Finished variables definition');

    window.ptxValidatePageById = (pageId) => {
        if (window.ptxPageId && window.ptxPageId !== pageId) {
            var err = new Error('Page already changed from ' + pageId + ' to ' + window.ptxPageId);
            err.bypassInWicketAjaxHandler = true;
            err.ptxPageChangedAlready = true;
            throw err;
        }
    };

    window.ptxEventReport = (eId) => {
        if (eId
            && eId !== '') {
            let url = new URL(ptxEventReportUrl);
            url.searchParams.set('id', eId);
            fetch(url.toString(), { method: "GET", headers: { Accept: 'application/json,*/*' }});
        }
    };
})();

    if (window.ptxIsCombatPage !== true) {
        (() => {
            var apply = () => {
                console.debug('Configuring PWA handlers');
                Ptx.eventListenerDrop(document, 'DOMContentLoaded', apply);
                Ptx.eventListenerDrop(document, 'readystatechange', apply);
                Ptx.eventListenerAddPB(document, 'pwa_beforeinstallprompt', () => {
                    console.debug('Event "pwa_beforeinstallprompt" was fired', window.PwaConfig);

                    ptxEventReport('pwa_install_prompt_working');

                    if (window.PwaConfig) {
                        PwaConfig.customPromptEnabled = true;
                        window.showInstallPromotion = () => {};
                        window.hideInstallPromotion = () => {
                            Ptx.setTimeout(() => {
                                console.debug('PWA was successfully installed');

                                ptxEventReport('pwa_installed');

                                if (Ptx.Pwa.onActionPage === true) {
                                    ptxLocLoad(ptxPageHomeUrl);
                                }
                            }, 0);
                        };
                    }
                });
                console.debug('Configured PWA handlers');
            };

            if (document.addEventListener) {
                document.addEventListener('DOMContentLoaded', apply);
            } else {
                document.attachEvent('onreadystatechange', apply);
            }

            console.debug('PWA handlers configurator set up');
        })();
    }

    (() => {
        if (window.ptxPageRenderedPingUrl === undefined) {
            return;
        }

        var apply = () => {
            Ptx.eventListenerDrop(document, 'DOMContentLoaded', apply);
            Ptx.eventListenerDrop(document, 'readystatechange', apply);

            const webSocketErr = Ptx.Utils.Console({type: 'error', source: 'WebSocket'});
            const webSocketLog = Ptx.Utils.Console({source: 'WebSocket'});

            if (Wicket.WebSocket
                    && Ptx.Shadows.WebSocket.connection_state_open) {
                try {
                    Wicket.WebSocket.send('pageId: ' + window.ptxPageId);
                    webSocketLog('Notified backend abount page rendered:', window.ptxPageId);
                } catch (e) {
                    webSocketErr('Unable to report back page display');
                }
            } else {
                webSocketErr('Unable to report back page display - no valid open WebSocket connection');
            }

            window.onerror = function (msg, url, line, column, error) {
                if (window.ptxPageRenderedPingUrl
                        && error
                        && error.bypassInWicketAjaxHandler === true
                        && error.ptxPageChangedAlready === true) {
                    try {
                        Wicket.WebSocket.send('pageId: ' + window.ptxPageId);
                        webSocketLog('Notified backend abount page rendered:', window.ptxPageId);
                    } catch (e) {
                        webSocketErr('Unable to report back page display');
                    }

                    if (window.ptxLogsOn) { console.info('Notify backend that page already changed'); }
                }

                return false;
            }
        };

        if (document.addEventListener) {
            document.addEventListener('DOMContentLoaded', apply);
        } else {
            document.attachEvent('onreadystatechange', apply);
        }

        console.debug('Backend pinger on page display set up');
    })();

    (() => {
        var apply = () => {
            console.debug('Fix VMMO widgets state');
            Ptx.eventListenerDrop(document, 'DOMContentLoaded', apply);
            Ptx.eventListenerDrop(document, 'readystatechange', apply);

            if (window.ptxIsCombatPage !== true) {
    window.isVmmoWidgetsDisabled = false;
}

            console.debug('VMMO widgets state fixed');
        };

        if (document.addEventListener) {
            document.addEventListener('DOMContentLoaded', apply);
        } else {
            document.attachEvent('onreadystatechange', apply);
        }

        console.debug('VMMO widgets state fix routine set up');
    })();

/*]]>*/
</script>
<script type="text/javascript" spa_ignore="true" src="/scripts/shared_1_009.js?v=1765963391098"></script>
<script type="text/javascript" spa_ignore="true" src="/scripts/gsap.js?v=1765963391098"></script>
<script type="text/javascript" >
/*<![CDATA[*/
Ptx.eventListenerAddPB(window, 'beforeunload', function() {
            'use strict';
            Ptx.Shadows.Notice.close({instant: true});
        });

        Ptx.eventListenerAddPB(window, 'load', function() {
            'use strict';
            if (window.trySound === undefined) {
                ptxLoadJsFiles(
                    [{
                        url: '/scripts/howler.js?v=1765963391098'
                    }, {
                        url: '/scripts/sounds.js?v=1765963391098'
                    }],
                    () => {
                        if (window.ptxLogsOn) {
                            console.warn('Sound JS attached')
                        }
                    }
                )();
            }
        });

/*]]>*/
</script>
<script type="text/javascript" id="">
/*<![CDATA[*/

    (() => {
        'use strict';
        Ptx.eventListenerAddPB(window, "unload", () => window.isVmmoWidgetsDisabled = false);
        window.isVmmoWidgetsDisabled = true;
    })();
    (() => {
        'use strict';
        let el = document.getElementById('id30');
        if (el.inited_ajax === true) {
            console.info('Calling init reporter from init script');
            
    (() => {
        'use strict';
        var markPage = window.ptxPageId;
        Ptx.performOnLoadPB(() => {
            let attempt = 0;
            var idxItvl = Ptx.setIntervalR(() => {
                if (window.ptxPageId !== markPage) {
                    Ptx.clearIntervalR(idxItvl);
                    return;
                }

                if (window.ptxLogsOn) { console.debug('Activity back reporter execute start for page', markPage, window.ptxPageId); }
                let el = document.getElementById('id30');

                if (el) {
                    el.dispatchEvent(new Event('click'));
                    if (window.ptxLogsOn) { console.debug('Activity report back performed for page', markPage, window.ptxPageId); }

                    if (++attempt >= 5) {
                        Ptx.clearIntervalR(idxItvl);
                    }
                } else {
                    Ptx.clearIntervalR(idxItvl);
                    if (window.ptxLogsOn) { console.debug('Activity report back dropped for page', markPage, window.ptxPageId, 'because of report back link absense'); }
                }
            }, 50);
            if (window.ptxLogsOn) { console.debug('Configured report activity back for page', markPage, window.ptxPageId); }
        }, undefined, true);
    })();
    
        } else {
            Ptx.eventListenerAddPB(el, "inited_ajax", () => { console.info('Calling init reporter from event listener'); 
    (() => {
        'use strict';
        var markPage = window.ptxPageId;
        Ptx.performOnLoadPB(() => {
            let attempt = 0;
            var idxItvl = Ptx.setIntervalR(() => {
                if (window.ptxPageId !== markPage) {
                    Ptx.clearIntervalR(idxItvl);
                    return;
                }

                if (window.ptxLogsOn) { console.debug('Activity back reporter execute start for page', markPage, window.ptxPageId); }
                let el = document.getElementById('id30');

                if (el) {
                    el.dispatchEvent(new Event('click'));
                    if (window.ptxLogsOn) { console.debug('Activity report back performed for page', markPage, window.ptxPageId); }

                    if (++attempt >= 5) {
                        Ptx.clearIntervalR(idxItvl);
                    }
                } else {
                    Ptx.clearIntervalR(idxItvl);
                    if (window.ptxLogsOn) { console.debug('Activity report back dropped for page', markPage, window.ptxPageId, 'because of report back link absense'); }
                }
            }, 50);
            if (window.ptxLogsOn) { console.debug('Configured report activity back for page', markPage, window.ptxPageId); }
        }, undefined, true);
    })();
     });
        }
    })();
    
/*]]>*/
</script>
<script type="text/javascript" src="https://vmmo.vten.ru/wicket/resource/org.apache.wicket.resource.JQueryResourceReference/jquery/jquery-3.7.0.min-ver-1C71D2942C207CDFC2FD416BCE974F5D.js"></script>
<script type="text/javascript" src="https://vmmo.vten.ru/wicket/resource/org.apache.wicket.ajax.AbstractDefaultAjaxBehavior/res/js/wicket-event-jquery.min-ver-7C4C4A31B92F211E7D61B1BF2BA81B39.js"></script>
<script type="text/javascript" src="https://vmmo.vten.ru/wicket/resource/org.apache.wicket.ajax.AbstractDefaultAjaxBehavior/res/js/wicket-ajax-jquery.min-ver-9C29485E1484C155A95634F3E6DF8A35.js"></script>
<script type="text/javascript" id="wicket-ajax-base-url">
/*<![CDATA[*/
Wicket.Ajax.baseUrl="basin/combat";
/*]]>*/
</script>
<script type="text/javascript" >
/*<![CDATA[*/
(() => {'use strict';var working=true;var tmrLoadid31 = (event) => { Wicket.Event.remove(window, 'load', tmrLoadid31 );var tmrInitid31 = () => {if (working) {try{Wicket.Ajax.ajax({"rt":3000,"c":"id31","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-refresher","ch":"ct_462577038|d"});(() => {let lnk=document.getElementById('id31');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id31 found');}})();}catch(e){console.error('Ajax response error (component #[id31]): ', e);}}if(working){Wicket.Timer.set('id31', tmrInitid31, 500);}};Wicket.Timer.set('id31', tmrInitid31, 500);};var tmrUnloadid31 = () => {working = false;Wicket.Timer.clear('id31');Wicket.Event.remove(window, 'unload', tmrUnloadid31 );Wicket.Event.remove(window, 'load', tmrLoadid31 );};Wicket.Event.add(window, 'unload', tmrUnloadid31 );if (document.readyState !== 'loading') {tmrLoadid31();}Wicket.Event.add(window, 'load', tmrLoadid31 );})();
/*]]>*/
</script>

<script src="/scripts/combat.js?v=1765963391098" type="text/javascript"></script>
<script type="text/javascript" src="https://vmmo.vten.ru/wicket/resource/org.apache.wicket.protocol.ws.api.WicketWebSocketJQueryResourceReference/res/js/wicket-websocket-jquery-ver-E9BEF69B8C67AC090F7B1C2A50FCDA29.js"></script>
<script type="text/javascript" >
/*<![CDATA[*/

        (() => {
            'use strict';

            if (!window.Ptx) {
                window.Ptx = {};
            }

            if (!Ptx.Shadows) {
                Ptx.Shadows = {};
            }

            if (!Ptx.Shadows.Anim) {
                Ptx.Shadows.Anim = {};
            }

            var apply = () => {
                Ptx.Shadows.Anim.vibrationEnabled = false;
            }

            if (document.readyState !== 'loading') {
                apply();
            } else {
                Ptx.eventListenerAddPB(document, "DOMContentLoaded", apply, undefined, true);
            }
        })();
    
/*]]>*/
</script>

<script type="text/javascript" spa_ignore="true">
/*<![CDATA[*/

Ptx.eventListenerAdd(window, 'unload', () => {
'use strict';
if (window.ptxLogsOn) { console.log('Clearing GSAP3 info'); }
gsap.killTweensOf("*");
gsap.globalTimeline.clear().kill();
});

/*]]>*/
</script>

<script type="text/javascript" spa_ignore="true">
/*<![CDATA[*/

(() => {
'use strict';
window.ptxWindowTimestampPostfix = 1765963391098;
})();

/*]]>*/
</script>
<script type="text/javascript">
        (() => {
            'use strict';

            if (window.ptxLogsOn) {console.log('Link interceptor setter script started');}

            (() => {
    'use strict';

    if (!window.Ptx) {
        window.Ptx = {};
    }

    if (!Ptx.Shadows) {
        Ptx.Shadows = {};
    }

    if (!Ptx.Shadows.Ui) {
        Ptx.Shadows.Ui = {};
    }

    if (!Ptx.Shadows.Ui.pageRefreshHard) {
        Ptx.Shadows.Ui.pageRefreshHard = () => {
            if (window.ptxPageUrl) {
                document.location = ptxPageUrl;
            } else {
                document.location.reload();
            }
        };
    }

    if (!Ptx.Shadows.Auth) {
        Ptx.Shadows.Auth = {};
    }

    if (!Ptx.Shadows.Auth.tryReAuth) {
        Ptx.Shadows.Auth.tryReAuth = () => {
            if (window.self !== window.top) {
try {
    if (window.self !== window.top) {
        console.warn('Trying force enclosing frame to reload');

        try {
            let url = sessionStorage.getItem('urlRestore');

            if (url
                && url !== '') {
                location.href = url;
            }
        } catch (e) {
            console.error('Reauth try error:', e);
        }
    }
} catch (e) {
    console.error('Enclosing frame reload try failed:', e);
}
} else {
                Ptx.Shadows.Ui.pageRefreshHard();
            }
        };
    }

    if (!Ptx.Vmmo) {
        Ptx.Vmmo = {};
    }

    if (!Ptx.Vmmo.Widgets) {
        Ptx.Vmmo.Widgets = {};

        Ptx.eventListenerAdd(document, 'DOMContentLoaded', () => {
            if (window.ptxComeAsSPA !== true) {
                return;
            }

            let icon = Ptx.Vmmo.Widgets.wdgtIcon;

            if (icon) {
                console.debug('Got stored icon, need place it?', icon);
                let present = document.getElementById('container_vmmo_icon');

                if (present
                    && present.querySelector('.fake')) {
                    console.debug('Got default present container.', present);
                    if (window.showWidgets) {
                        showWidgets();
                    } else {
                        console.debug('No widgets engine loaded yet');
                    }
                } else {
                    console.debug('Got present custom container:', present);
                }
            }
        });

        {
            let receivedOnce = false;
            let configured = false;

            let proc = () => {
                if (configured === false) {
                    configured = true;
                    var idxItvl = Ptx.setIntervalR(() => {
                        let el = document.getElementById('container_vmmo_icon');

                        if (!el
                            || !el.querySelector('.fake')) {
                            if (el) {
                                Ptx.Vmmo.Widgets.wdgtIcon = el;
                                console.debug('Stored vmmo icon:', el);
                            } else {
                                delete Ptx.Vmmo.Widgets.wdgtIcon;
                            }
                            configured = false;
                            Ptx.clearIntervalR(idxItvl);
                        }
                    }, 1000, 'VMMO icon checker ' + ptxPageId + '_' + Math.round(Math.random() * 10000));

                    Ptx.eventListenerAddPB(window, 'unload', () => {configured = false; Ptx.clearIntervalR(idxItvl);});
                }
            };

            Ptx.eventListenerAdd(document, 'vmmo_widgets_received', (ev) => {
                receivedOnce = true;
                console.debug('Got vmmo widgets:', ev);
                proc();
            });
            Ptx.performOnLoad(() => {
                if (receivedOnce === true) {
                    proc();
                }
            });
        }
    }
})();

            var scriptVersion = 20;

            if (window.ptxIgnoreWebView === false) {
                Ptx.eventListenerAddPB(document, "DOMContentLoaded", () => {
                    document.body.removeAttribute('ignoreWebView');
                }, undefined, true);
            } else if (window.ptxIgnoreWebView === true) {
                Ptx.eventListenerAddPB(document, "DOMContentLoaded", () => {
                    document.body.setAttribute('ignoreWebView', true);
                }, undefined, true);
            }

            if (!Ptx.Shadows || !Ptx.Shadows.version || Ptx.Shadows.version != scriptVersion) {
                if (window.ptxLogsOn) {console.log('Dropping old links interceptor');}

                if (Ptx.Shadows) {
                    try {
                        delete Ptx.Shadows.getWebViewContentLogged;
                    } catch (e) {
                        console.error('Old version remove error: ', e);
                    }

                    try {
                        delete Ptx.Shadows.getWebViewContent;
                    } catch (e) {
                        console.error('Old version remove error: ', e);
                    }

                    try {
                        delete Ptx.Shadows.Try;
                    } catch (e) {
                        console.error('Old version remove error: ', e);
                    }

                    try {
                        delete Ptx.Shadows.scrollTo;
                    } catch (e) {
                        console.error('Old version remove error: ', e);
                    }
                } else {
                    Ptx.Shadows = {};
                }

                Ptx.Shadows.version = scriptVersion;

                if (window.ptxLogsOn) {console.log('Defined link interceptor setter version ' + Ptx.Shadows.version);}
            } else {
                if (window.ptxLogsOn) {console.log('Using present link interceptor setter version ' + Ptx.Shadows.version);}
            }

            if (!Ptx.Shadows.scrollTo) {
                const itnlScrollTo = (markupId) => {
                    var elem = document.getElementById(markupId);

                    if (elem
                            && elem !== null) {
                        elem.scrollIntoView();
                        if (window.ptxLogsOn) {console.log('Proceeding to label #' + markupId);}
                        return true;
                    } else {
                        if (window.ptxLogsOn) {console.log('Not found label #' + markupId);}
                    }

                    return false;
                };
                Ptx.Shadows.scrollTo = (markupId) => {
                    try {
                        return itnlScrollTo(markupId);
                    } catch (e) {
                        console.error("SPA on label #' + markupId + ' scroll error: ", e);
                    }

                    return false;
                }
            }

            if (!Ptx.Shadows.Try) {
                Ptx.Shadows.Try = {};
                if (window.ptxLogsOn) { console.log('Defining Ptx.Shadows.Try'); }

                let loopingBack = false;
                let stackPages = [];

                Ptx.eventListenerAdd(document, "DOMContentLoaded", () => {
                    if (window.ptxUserLoggedInJustNow === true) {
                        stackPages = [];
                    }
                });

                {
                    let fixingHistory = null;
                    let handler;

                    console.debug('Configuring popstate interceptor');
                    Ptx.eventListenerAdd(window, 'popstate', handler = ((ev) => {
                        console.debug('Event intercepted:', handler, ev, ev.eventPhase, ev.state, fixingHistory, (new Error()).stack);

                        if (window.ptxBackButtonOverrideAllowed !== true) {
                            console.debug('Popstate event override current page allowed state:', window.ptxBackButtonOverrideAllowed);
                            return;
                        }

                        if (ev.isTrusted) {
                            if (fixingHistory !== null) {
                                fixingHistory = null;
                                console.debug('Preventing double handling for', ev);
                                return;
                            }

                            fixingHistory = ev;
                            ev.preventDefault();
                            history.go(1);

                            if (stackPages.length > 1) {
                                stackPages.pop();
                                let url = stackPages[stackPages.length - 1];

                                if (url) {
                                    console.debug(
                                        'Moving back to',
                                        url,
                                        'new top',
                                        stackPages.length > 0
                                            ? stackPages[stackPages.length - 1]
                                            : undefined
                                    );
                                    loopingBack = true;
                                    ptxLocLoad(url);
                                }
                            } else {
                                stackPages = [];

                                if (ptxPagePathCln !== '/') {
                                    loopingBack = true;

                                    let path = '/';

                                    if (window.ptxJSessionId
                                        && ptxJSessionId !== '') {
                                        path = path + ';jsessionid=' + ptxJSessionId;
                                    }

                                    ptxLocLoad(path + window.location.hash);
                                }
                            }
                        }
                    }));
                }

                var validator = () => {return window.Ptx && Ptx.Shadows && Ptx.Shadows.Try && Ptx.Shadows.version && Ptx.Shadows.version === scriptVersion};

                Ptx.eventListenerAdd(document, "DOMContentLoaded", (ev) => {
                    if (window.ptxLogsOn) {console.log('DOMContentLoaded caught: ', (ev || window.event));}
                }, undefined, validator);
                Ptx.eventListenerAdd(document, "domready", (ev) => {
                    if (window.ptxLogsOn) {console.log('domready caught: ', (ev || window.event));}
                }, undefined, validator);
                Ptx.eventListenerAdd(window, "load", (ev) => {
                    if (window.ptxLogsOn) {console.log('load caught: ', (ev || window.event));}
                }, undefined, validator);
                Ptx.eventListenerAdd(document, "readystatechange", (ev) => {
                    if (window.ptxLogsOn) {console.log('Document readystatechange caught: ', (ev || window.event));}
                }, undefined, validator);
                Ptx.eventListenerAdd(window, "readystatechange", (ev) => {
                    if (window.ptxLogsOn) {console.log('Window readystatechange caught: ', (ev || window.event));}
                }, undefined, validator);

               let isAttrValueTrue = (v) => (
                   v === 'true' || (
                       v !== 'false'
                           && v && (
                               (v = v.trim()) === 'true' || (
                                   v !== ''
                                       && v !== 'false'
                                       && ptxEval(v) === true
                               )
                       )
                   )
               );
               Ptx.Shadows.Try = {
                    these: function() {
                        var returnValue;

                        for (var i = 0, length = arguments.length; i < length; i++) {
                            var lambda = arguments[i];
                            try {
                                returnValue = lambda();
                                break;
                            } catch (e) {}
                        }

                        return returnValue;
                    },

                    execScript: function (node, funcExec) {
                        var href = node.getAttribute('src');

                        if (href) {
                            if (window.ptxLogsOn) {console.debug('Processing "' + href + '"');}

                            if (ptxAttrDefined(node, 'defer') || ptxAttrDefined(node, 'async')) {
                                if (window.ptxLogsOn) {console.log('Scheduling async/defer load for "' + href + '"');}
                                ptxLoadJsFile(href, null, false, node.getAttribute('drop_on_unload') === 'true');
                            } else {
                                var funcO = funcExec;
                                funcExec = ptxLoadJsFile(href, funcO, false, node.getAttribute('drop_on_unload') === 'true');
                            }

                            return funcExec;
                        }

                        {
                            var scrT = node.innerText;

                            if (scrT && scrT.length) {
                                try {
                                    if (window.ptxLogsOn) {console.debug('Processing "' + Ptx.printout(scrT) + '"', node);}

                                    if (funcExec === undefined) {
                                        if (window.ptxLogsOn) {console.debug('Executing immediately script "' + Ptx.printout(scrT) + '"', node);}
                                        ptxEval(scrT);
                                    } else {
                                        var funcE = funcExec;
                                        return () => {
                                            if (window.ptxLogsOn) {console.debug('Executing script "' + Ptx.printout(scrT) + '"', node);}
                                            ptxEval(scrT);

                                            if (funcE) {
                                                funcE();
                                            }
                                        }
                                    }
                                } catch (e) {
                                    console.error('Exec error for passed script:', window.ptxLogsOn ? scrT : Ptx.printout(scrT));
                                    console.error('Passed script exec error: ', e);
                                }
                            }
                        }

                        return funcExec;
                    },

                    isAsyncLoad: function(node) {
                        return node && (
                            ptxAttrDefined(node, 'defer') || ptxAttrDefined(node, 'async')
                        ) && node.getAttribute('src')
                    },

                    execRefs: function(refs, execFunc) {
                        if (refs.length === 1) {
                            return this.execScript(refs[0].node, execFunc);
                        } else if (refs.length > 0) {
                            if (window.ptxLogsOn) {
                                console.log('Bunch of ' + refs.length + ' files load (reverse order):');
                                refs.forEach(ref => console.log(ref.url));
                            }

                            return ptxLoadJsFiles(refs.reverse(), execFunc);
                        }

                        return execFunc;
                    },

                    exec: function (head, body) {
                        var self = Ptx.Shadows.Try;
                        var headP = document.getElementsByTagName("head")[0];
                        if (window.ptxLogsOn) {console.log('Trying to execute passed scripts');}

                        var execFunc = null;
                        var funcCommit = function() {
                            try {
                                var elNew = head.querySelector('title');
                                var elPresent = headP.querySelector('title');

                                if (elPresent && elPresent !== null) {
                                    if (elNew && elNew !== null) {
                                        elPresent.outerHTML = elNew.outerHTML;
                                    } else {
                                        headP.removeChild(elPresent);
                                    }
                                } else if (elNew && elNew !== null) {
                                    elPresent = document.createElement(elNew.tagName);
                                    elPresent.outerText = elNew.outerText;
                                    headP.appendChild(elPresent);
                                }
                            } catch (e) {
                                console.error("Document title update error: ", e);
                            }

                            try {
                                var elNew = head.querySelector('meta[name=viewport]');
                                var elPresent = headP.querySelector('meta[name=viewport]');

                                if (elPresent && elPresent !== null) {
                                    if (elNew && elNew !== null) {
                                        elPresent.outerHTML = elNew.outerHTML;
                                    } else {
                                        headP.removeChild(elPresent);
                                    }
                                } else if (elNew && elNew !== null) {
                                    elPresent = document.createElement(elNew.tagName);

                                    for (var idx = 0; idx < elNew.attributes.length; idx++) {
                                        var attr = elNew.attributes[idx];
                                        elPresent.setAttribute(attr.name, attr.value);
                                    }

                                    headP.appendChild(elPresent);
                                }
                            } catch (e) {
                                console.error("Document viewport update error: ", e);
                            }

                            try {
                                document.dispatchEvent(new Event("readystatechange"));
                                if (window.ptxLogsOn) {console.log("Document readystatechange dispatched 1");}
                            } catch (e) {
                                console.error("Document readystatechange dispatch error: ", e);
                            }

                            try {
                                document.dispatchEvent(new Event("DOMContentLoaded"));
                                if (window.ptxLogsOn) {console.log("DOMContentLoaded dispatched 1");}
                            } catch (e) {
                                console.error("DOMContentLoaded dispatch error: ", e);
                            }

                            try {
                                document.dispatchEvent(new Event("domready"));
                                if (window.ptxLogsOn) {console.log("DOMReady dispatched 1");}
                            } catch (e) {
                                console.error("DOMReady dispatch error: ", e);
                            }

                            try {
                                window.dispatchEvent(new Event("load"));
                                if (window.ptxLogsOn) {console.log("Load dispatched");}
                            } catch (e) {
                                console.error("Load dispatch error: ", e);
                            }
                        };

                        if (body) {
                            if (window.ptxLogsOn) {console.debug("Processing body scripts");}
                            var els = Array.from(body.querySelectorAll('script'));

                            if (execFunc === null) {
                                execFunc = funcCommit;
                            }

                            els.forEach((value) => {
                                let type = value.getAttribute('type');

                                if ((
                                    !type
                                        || type === ''
                                        || type.indexOf('/javascript') >= 0
                                ) && !ptxAttrCheckInHierarchy(value, 'spa_ignore', isAttrValueTrue)
                                    && self.isAsyncLoad(value)) {
                                    self.execScript(value);
                                }
                            });
                            if (window.ptxLogsOn) {console.debug("Processing body scripts reversed");}
                            {
                                let refs = [];

                                els.reverse().forEach((value) => {
                                    let type = value.getAttribute('type');

                                    if ((
                                        !type
                                            || type === ''
                                            || type.indexOf('/javascript') >= 0
                                    ) && !ptxAttrCheckInHierarchy(value, 'spa_ignore', isAttrValueTrue)
                                        && !self.isAsyncLoad(value)) {
                                        let src;

                                        if ((src = value.getAttribute('src'))) {
                                            refs.push({
                                                node: value,
                                                url: src,
                                                dropOnUnload: value.getAttribute('drop_on_unload') === 'true'
                                            });
                                        } else {
                                            execFunc = self.execRefs(refs, execFunc);
                                            refs = [];
                                            execFunc = self.execScript(value, execFunc);
                                        }
                                    }
                                });

                                execFunc = self.execRefs(refs, execFunc);
                                refs = [];
                            }
                        }

                        if (head) { // Head scripts will not modify head...
                            if (window.ptxLogsOn) {console.debug("Processing head scripts");}
                            var els = Array.from(head.querySelectorAll('script'));

                            if (execFunc === null) {
                                execFunc = funcCommit;
                            }

                            els.forEach((value) => {
                                let type = value.getAttribute('type');

                                if ((
                                    !type
                                        || type === ''
                                        || type.indexOf('/javascript') >= 0
                                ) && !ptxAttrCheckInHierarchy(value, 'spa_ignore', isAttrValueTrue)
                                    && self.isAsyncLoad(value)) {
                                    self.execScript(value);
                                }
                            });
                            if (window.ptxLogsOn) {console.debug("Processing head scripts reversed");}

                            {
                                let refs = [];

                                els.reverse().forEach((value) => {
                                    let type = value.getAttribute('type');

                                    if ((
                                        !type
                                            || type === ''
                                            || type.indexOf('/javascript') >= 0
                                    ) && !ptxAttrCheckInHierarchy(value, 'spa_ignore', isAttrValueTrue)
                                        && !self.isAsyncLoad(value)) {
                                        let src;

                                        if ((src = value.getAttribute('src'))) {
                                            refs.push({
                                                node: value,
                                                url: src,
                                                dropOnUnload: value.getAttribute('drop_on_unload') === 'true'
                                            });
                                        } else {
                                            execFunc = self.execRefs(refs, execFunc);
                                            refs = [];
                                            execFunc = self.execScript(value, execFunc);
                                        }
                                    }
                                });

                                execFunc = self.execRefs(refs, execFunc);
                                refs = [];
                            }
                        }

                        if (execFunc) {
                            execFunc();
                        } else {
                            if (window.ptxLogsOn) {console.log('Hand-made dispatch 2');}
                            funcCommit();
                        }

                        if (window.ptxLogsOn) {console.log('Passed scripts executed');}
                    },
                };

                Ptx.Shadows.numLinksInterceptorInstance = 0;

                Ptx.Shadows.getWebViewContent = async function (link) {
                    var self = Ptx.Shadows;

                    if (link) {
                        document.documentElement.style.cursor = 'wait';

                        try {
                            var success = false;

                            if (window.ptxLogsOn) {console.log('Sending request');}

                            {
                                let res = await fetch(link, {
                                    method: "GET",
                                    headers: { "Accept": "text/html", "ptxSPA": "true" }
                                });

                                if (window.ptxLogsOn) {console.log('OnReadyStateChange: ', res);}

                                // redirect
                                if (res.status === 301 || res.status === 302 || res.status === 303 || res.status === 307) {
                                    if (window.ptxLogsOn) {console.log('Processing redirect to ' + res.getResponseHeader('Location'));}

                                    let resR = await self.getWebViewContent(res.headers.get('location'));

                                    if (resR !== true) {
                                        success = true;
                                    }

                                    return;
                                }

                                let contentType;

                                if (res.status === 205) {
                                    if (window.ptxLogsOn) {console.log('Hard redirect requested by response status:', res.status);}
                                    window.location = link;
                                } else if (res.status === 204 || res.status === 304) {
                                    if (window.ptxLogsOn) {console.log('Found "do nothing" response status', res.status);}
                                } else if (res.status === 200 && (
                                    (contentType = res.headers.get('content-type')) === ''
                                        || (new RegExp('/html', "igm")).test(contentType)
                                )) {
                                    if (window.ptxLogsOn) {console.log('Found processable response type ' + contentType);}

                                    var headPassed = null, bodyPassed = null;

                                    {
                                        let responseText = await res.text();
                                        var resultB = null;

                                        if ((resultB = (new RegExp('<(?:body)[^><]*>([^]*)</(?:body)>', 'ig')).exec(responseText))) {
                                            bodyPassed = document.createElement('fakeBody');
                                            bodyPassed.innerHTML = resultB[1];
                                            resultB = null;
                                        }

                                        var resultH = null;

                                        if ((resultH = (new RegExp('<(?:head)[^><]*>([^]*)</(?:head)>', 'ig')).exec(responseText))) {
                                            headPassed = document.createElement('fakeHead');
                                            headPassed.innerHTML = resultH[1];
                                            resultH = null;
                                        }
                                    }

                                    if (bodyPassed) {
                                        try {
                                            window.dispatchEvent(new Event("beforeunload"));
                                            if (window.ptxLogsOn) {console.log("BeforeUnload dispatched");}
                                        } catch (e) {
                                            console.error("BeforeUnload dispatch error: ", e);
                                        }

                                        try {
                                            var evnt = new Event("unload");
                                            evnt.ptxGenericNotification = true;
                                            window.dispatchEvent(evnt);
                                            if (window.ptxLogsOn) {console.log("Unload dispatched");}
                                        } catch (e) {
                                            console.error("Unload dispatch error: ", e);
                                        }

                                        {
                                            if (loopingBack === false) {
                                                if (stackPages.length <= 0
                                                    || stackPages[stackPages.length - 1] !== link) {
                                                    stackPages.push(link);

                                                    if (stackPages.length > 10) {
                                                        stackPages = Array.prototype.slice.call(stackPages, stackPages.length - 10);
                                                    }

                                                    console.debug('Current pages stack:', stackPages);
                                                }
                                            } else {
                                                loopingBack = false;
                                            }
                                        }

                                        document.body.innerHTML = bodyPassed.innerHTML;

                                        self.Try.exec(headPassed, document.body);
                                        success = true;
                                    }
                                } else {
                                    if (window.ptxLogsOn) { console.log('Found unprocessable response type/status ' + contentType + '/' + res.status); }
                                }
                            }

                            return !success;
                        } catch (e) {
                            console.error("Content take error: ", e);
                        } finally {
                            document.documentElement.style.cursor = 'auto';
                            document.documentElement.style.filter = '';
                        }
                    }

                    return true;
                };

                Ptx.Shadows.getWebViewContentLogged = async function(url) {
                    try {
                        if (window.ptxLogsOn) { console.log("Loading content for '" + url + "'"); }
                        await Ptx.Shadows.getWebViewContent(url);
                    } catch (e) {
                        console.error("Page content take error: ", e);
                    }
                }
            }

            (() => {
                if (window.ptxLogsOn) {console.log('Link interceptor setter started');}

                function ptxLinksInterceptorSet () {
                    Ptx.eventListenerDrop(document, "DOMContentLoaded", ptxLinksInterceptorSet);

                    (() => {
                        try {
                            let search;

                            {
                                let url = new URL(window.location.href);
                                url.searchParams.set('ppf5', ptxPageUrlPPF5);
                                search = url.search;
                            }
                            window.history.pushState(null, document.title, window.location.pathname + search + window.location.hash)
                        } catch (e) {
                            console.error('Hash update error: ', e);
                        }
                    })();

                    if (!Ptx.Shadows.shadowsLinksInterceptor || document.onclick !== Ptx.Shadows.shadowsLinksInterceptor) {
                        var numLinksInterceptorInst = Ptx.Shadows.numLinksInterceptorInstance++;
                        var numIntCallCounter = 0;
                        var funcOrig = document.onclick;
                        Ptx.Shadows.interceptWorking = 0;

                        Ptx.Shadows.interceptInProgress = () => {
                            let working = Ptx.Shadows.interceptWorking;
                            return working !== undefined
                                    && working > 0;
                        };

                        if (window.ptxLogsOn) {console.log('Setting links interceptor ' + numLinksInterceptorInst);}

                        Ptx.Shadows.shadowsLinksInterceptor = async function (ev) {
                            var timeStart = window.ptxLogsOn ? performance.now() : null;
                            var timeReceived;

                            try {
                                var numCall = numIntCallCounter++;

                                if (ev.altKey || ev.ctrlKey || ev.metaKey || ev.shiftKey || ev.defaultPrevented) {
                                    var state = !ev.defaultPrevented || (
                                        ev.altKey || ev.ctrlKey || ev.metaKey || ev.shiftKey
                                    );

                                    if (window.ptxLogsOn) {
                                        console.log(
                                            'Drop execution (' + state + ') for links interceptor ' + numLinksInterceptorInst + ' call ' + numCall + ': '
                                                + ev.altKey + ', '
                                                + ev.ctrlKey + ', '
                                                + ev.metaKey + ', '
                                                + ev.shiftKey + ', '
                                                + ev.defaultPrevented
                                        );
                                    }

                                    return state;
                                }

                                if (window.ptxLogsOn) {
                                    console.info('RT: ', timeStart - Ptx.nvlC(ev, (e) => e.timeStamp));
                                }

                                var updated = window.ptxPageWasUpdated === true
                                        || !window.ptxWindowTimestampPostfix
                                        || window.ptxWindowTimestampPostfix !== window.ptxActualTimestampPostfix;

                                if (window.ptxLogsOn) {console.log('Executing links interceptor ' + numLinksInterceptorInst + ' call ' + numCall);}
                                try {
                                    if (Ptx.Ui
                                        && Ptx.Ui.urlTraverseHandler) {
                                        Ptx.Ui.urlTraverseHandler(ev.target);
                                    }
                                } catch (e) {
                                    console.error('Url traverse handler error:', e);
                                }

                                try {
                                    if (Ptx.Ui
                                        && Ptx.Ui.urlQuicktipHandler) {
                                        let resQT = Ptx.Ui.urlQuicktipHandler(ev);

                                        if (resQT !== null) {
                                            return resQT;
                                        }
                                    }
                                } catch (e) {
                                    console.error('Quicktip handler error:', e);
                                }

                                try {
                                    var anchor = ev.target.closest('A');

                                    if (!anchor) return true;

                                    for (var n = anchor; n.parentNode; n = n.parentNode) {
                                        var ignoreWebView = n.getAttribute('ignoreWebView');

                                        if (ignoreWebView) {
                                            if (window.ptxLogsOn) {console.log('Links interceptor ' + numLinksInterceptorInst + ' call ' + numCall + ' execution cancelled because of ignorewWebView attribute');}
                                            return true;
                                        }
                                    }

                                    if (Ptx.Shadows.interceptWorking > 0) {
                                        ev.preventDefault();
                                        if (window.ptxLogsOn) {console.log('Links interceptor breaks ' + numLinksInterceptorInst + ' call ' + numCall + ' execution because of unfinished earlier process');}
                                        return false;
                                    }

                                    Ptx.Shadows.interceptWorking++;

                                    try {
                                        
    (() => {
        try {
            window.history.pushState(null, document.title, window.location.pathname + window.location.search)
        } catch (e) {
            console.error('Hash clean error: ', e);
        }
    })();
    
                                        var href = anchor.getAttribute('href');

                                        {
                                            if (updated === false
                                                    && window.ptxTimestamp
                                                    && href
                                                    && href.indexOf('/city') >= 0
                                                    && (Number(new Date()) - window.ptxTimestamp) >= 600000) {
                                                if (window.ptxLogsOn) { console.info('Performing javascript page context clean.'); }
                                                updated = true;
                                            }
                                        }

                                        if (updated === true) {
                                            if (window.ptxLogsOn) {
                                                console.warn(
                                                    'Refreshing page due to timestamp postfixes mismatch - '
                                                        + window.ptxWindowTimestampPostfix
                                                        + ' != '
                                                        + window.ptxActualTimestampPostfix + ' or due to external request: ' + window.ptxPageWasUpdated
                                                );
                                            }
                                            return true;
                                        }

                                        let onclickC;

                                        if (href === '' || href === '#') {
                                            ev.preventDefault();
                                            ptxLocReload();
                                            timeReceived = window.ptxLogsOn ? performance.now() : null;
                                            return false;
                                        } else if (href
                                            && (
                                                (onclickC = anchor.getAttribute('onclick')) === undefined
                                                    || onclickC === null
                                                    || onclickC === ''
                                            ) && href.substring(0, 11) !== 'javascript:') {

                                            {
                                                try {
                                                    let search;

                                                    {
                                                        let url = new URL(window.location.href);
                                                        url.searchParams.set('ppf5', href);
                                                        search = url.search;
                                                    }
                                                    window.history.pushState(null, document.title, window.location.pathname + search + window.location.hash)
                                                } catch (e) {
                                                    console.error('Hash update error: ', e);
                                                }
                                            }

                                            ev.preventDefault();
                                            await Ptx.Shadows.getWebViewContent(href);
                                            timeReceived = window.ptxLogsOn ? performance.now() : null;

                                            {
                                                if (window.ptxLogsOn) {console.log('Trying to find label in "' + href + '"');}
                                                var resultH = null;

                                                if ((resultH = (new RegExp('#([^\\s#?&/]+)', 'i')).exec(href))) {
                                                    Ptx.Shadows.scrollTo(resultH[1]);
                                                }
                                            }

                                            return false;
                                        }
                                    } finally {
                                        Ptx.Shadows.interceptWorking--;
                                    }
                                } finally {
                                    if (window.ptxLogsOn) {console.log('Finished links interceptor ' + numLinksInterceptorInst + ' call ' + numCall);}

                                    if (funcOrig) {
                                        if (window.ptxLogsOn) {console.log('Starting links interceptor ' + numLinksInterceptorInst + ' call ' + numCall + ' propagation');}

                                        try {
                                            funcOrig(ev);
                                        } finally {
                                            if (window.ptxLogsOn) {console.log('Finished links interceptor ' + numLinksInterceptorInst + ' call ' + numCall + ' propagation');}
                                        }
                                    }
                                }
                            } finally {
                                if (window.ptxLogsOn) {
                                    var mmntFinish = performance.now();

                                    if (timeReceived) {
                                        console.info('Link interceptor work took ' + (mmntFinish - timeStart) + ' msecs, postprocess took ' + (mmntFinish - timeReceived) + ' msecs');
                                    } else {
                                        console.info('Link interceptor work took ' + (mmntFinish - timeStart) + ' msecs');
                                    }
                                }
                            }
                        };

                        document.onclick = Ptx.Shadows.shadowsLinksInterceptor;
                    }
                }

                Ptx.eventListenerAdd(document, "DOMContentLoaded", ptxLinksInterceptorSet);
            })();

            window.ptxLocLoad = async (locUrl) => {
                if (locUrl) {
                    let useSpaLoad = true;

                    try {
                        useSpaLoad = ((new URL(locUrl)).hostname === window.location.hostname);
                    } catch(e) {
                    }

                    if (useSpaLoad === true) {
                        await Ptx.Shadows.getWebViewContent(locUrl);
                    } else {
                        window.location = locUrl;
                    }
                }
            }

            window.ptxLocReload = async () => {
                await ptxLocLoad(window.ptxPageUrl);
            }

            Ptx.eventListenerAddPB(document, 'DOMContentLoaded', () => {
                if (window.Wicket
                        && Wicket.Ajax) {
                    Wicket.Ajax.explicitRedirectHandler = (url) => ptxLocLoad(url);
                }
            });

            if (window.ptxLogsOn) {console.log('Link interceptor setter script finished');}
        })();

        queueMicrotask(() => {
    console.log(
        '%c      - ,  101%   .              !',
        'color: yellow; font-size: 40px; border: 1px solid gray; border-radius: 25px; padding: 5px 20px; background-color: black;'
    );
});
    </script>


    <!-- Yandex.Metrika counter -->
    
        <script type="text/javascript">
            (() => {
                'use strict';
                if (window.ptxIsCombatPage !== true) {
                        var proc = () => {
                            if (window.ym === undefined) {
                                (function(m,e,t,r,i,k,a){m[i]=m[i]||function()
                                {(m[i].a=m[i].a||[]).push(Array.prototype.slice.call(arguments))};
                                m[i].l=1*new Date();
                                for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
                                k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
                                (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

                                window.ym.ptxCount = 0;
                            }

                            if ((window.ym.ptxCount++) % 30 === 0) {
                                ym(94691268, "init", {
                                    clickmap: false,
                                    trackLinks: false,
                                    accurateTrackBounce: false,
                                    webvisor: false,
                                    ecommerce: "dataLayer"
                                });
                                window.dataLayer = window.dataLayer || [];
                            }

                            if (window.ymr === undefined) {
                                window.ymr = function() {
                                    if (window.ptxIsCombatPage !== true) { ym.call(null, Array.prototype.slice.call(arguments)) }
                                };
                            }
                        };

                        if (window.dataLayer && dataLayer instanceof Array && dataLayer.length > 100) {
                            console.info('Drop collected data YTM', dataLayer.length);
                            setTimeout(() => {
                                delete window.dataLayer;
                                window.dataLayer = window.dataLayer || [];
                                if (window.ptxLogsOn) { console.info('Dropped collected data YTM'); }
                            }, 0);
                        }

                        if (window.ym && ym.a && ym.a instanceof Array && ym.a.length > 100) {
                            console.info('Forcing send collected data YM', ym.a.length);
                            ym(94691268, "hit", "/forced-data-submit", {
                                transport: 'beacon'
                            });

                            setTimeout(() => {
                                delete window.ym.a;
                                delete window.dataLayer;
                                window.dataLayer = window.dataLayer || [];
                                if (window.ptxLogsOn) { console.info('Dropped collected data YM'); }
                            }, 0);
                            setTimeout(proc, 0);
                            return;
                        }

                        proc();
                } else if (window.ym) {
                    ym(94691268, 'disable');
                    Ptx.eventListenerAddPB(window, 'beforeunload', () => ym(94691268, 'enable'));

                    if (ym.a && ym.a instanceof Array && ym.a.length > 10) {
                        ym.a = Array.prototype.slice.call(ym.a, ym.a.length - 10);
                        ym(94691268, 'disable');
                    }

                    if (window.dataLayer && dataLayer instanceof Array && dataLayer.length > 10) {
                        dataLayer = Array.prototype.slice.call(dataLayer, dataLayer.length - 10);
                    }
                }
            })();
        </script>
        <script type="text/javascript">
            if (window.ptxIsCombatPage !== true
                    && window.ym) {
                ym(94691268, "hit", window.ptxPagePathCln, {
                    callback: () => {
                        if (window.ptxLogsOn) { console.log('Hit call stacktrace:', (new Error()).stack); }

                        setTimeout(() => {
                            if (ym.a && ym.a instanceof Array && ym.a.length > 10) {
                                ym.a = Array.prototype.slice.call(ym.a, ym.a.length - 10);
                            }
                        }, 100);
                    }
                });
            }
        </script>
        <script type="text/javascript">
            (() => {
                'use strict';
                if (window.ptxIsCombatPage === true) {
                    Ptx.eventListenerAddPB(document, 'DOMContentLoaded', () => {
                        let el = document.getElementById('body_id');

                        if (el) {
                            el.classList.add('ym-hide-content');
                            el.classList.add('ym-disable-clickmap');
                            el.classList.add('ym-disable-keys');
                            el.classList.add('ym-disable-tracklink');
                            if (window.ptxLogsOn) { console.debug('Suppressed YM content store'); }
                        }
                    });
                } else {
                    Ptx.eventListenerAddPB(document, 'DOMContentLoaded', () => {
                        let el = document.getElementById('body_id');

                        if (el) {
                            el.classList.remove('ym-hide-content');
                            el.classList.remove('ym-disable-clickmap');
                            el.classList.remove('ym-disable-keys');
                            el.classList.remove('ym-disable-tracklink');
                        }
                    });
                }
            })();
        </script>
    
    <!-- /Yandex.Metrika counter -->
    

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta charset="utf-8" />
<meta name="theme-color" content="#000000"/>
<title> &quot; &quot; -  </title>
<meta name="language" content="russian, ru, "/>
<meta name="viewport" content="width=device-width,maximum-scale=1.0" />
<meta name="description" content="  -   MMORPG       ,    !  ,  ,       !">
<meta property="og:title" content=" &quot; &quot;">
<meta property="og:type" content="">
<meta property="og:url" content="https://m.vten.ru">
<meta property="og:description" content="  -   MMORPG       ,    !  ,  ,       !">
<meta name="keywords" content=", RPG, MMORPG, , , wap, ,  , ,  ,  ,   ,  ">
<link rel="manifest" href="/manifest_p.json"/>
<meta name="theme-color" content="#000000" />
<link rel="icon" sizes="192x192" href="/images/game-icon_vten2021_192x192.png"/>
<meta name="robots" content="INDEX, FOLLOW"/>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<link rel="apple-touch-icon" href="/images/touch/touch-icon-iphone.png" />
<link rel="apple-touch-icon" sizes="57x57" href="/images/touch/touch-icon-iphone.png" />
<link rel="apple-touch-icon" sizes="72x72" href="/images/touch/touch-icon-ipad.png" />
<link rel="apple-touch-icon" sizes="114x114" href="/images/touch/touch-icon-iphone-retina.png" />
<link rel="apple-touch-icon" sizes="144x144" href="/images/touch/touch-icon-ipad-retina.png" />







<script type="text/javascript" id="websocket_subscribe">
/*<![CDATA[*/

    (() => {
        'use strict';
        if (!Ptx.Shadows.WebSocket) {
            Ptx.Shadows.WebSocket = {};
        }

        const CDATALog = Ptx.Utils.Console({source: 'CDATA'});
        const CDATADebug = Ptx.Utils.Console({type: 'debug', source: 'CDATA'});
        const webSocketLog = Ptx.Utils.Console({source: 'WebSocket'});
        const webSocketDebug = Ptx.Utils.Console({type: 'debug', source: 'WebSocket'});
        const webSocketWarn = Ptx.Utils.Console({type: 'warn', source: 'WebSocket'});
        const webSocketErr = Ptx.Utils.Console({type: 'error', source: 'WebSocket'});

        let isConnectionValid = () => {
            let state;
            return window.Wicket
                    && Wicket.WebSocket
                    && Wicket.WebSocket.INSTANCE
                    && Wicket.WebSocket.INSTANCE.ws
                    && ((state = Wicket.WebSocket.INSTANCE.ws.readyState) == WebSocket.OPEN
                    || state == WebSocket.CONNECTING);
        };
        let isConnectionOpen = () => {
            return window.Wicket
                    && Wicket.WebSocket
                    && Wicket.WebSocket.INSTANCE
                    && Wicket.WebSocket.INSTANCE.ws
                    && Wicket.WebSocket.INSTANCE.ws.readyState == WebSocket.OPEN;
        };

        CDATALog('Set up backend pinger');
Ptx.setInterval(() => {
    'use strict';
    if (!Ptx.Shadows.interceptInProgress() && document.hidden === false && ptxIsCombatPage !== true) { CDATALog('Ping backend for notices'); Ptx.Shadows.Notice.show(); } else { CDATADebug('Backend ping for notices suppressed'); }
}, 30000);

        let reconnect = Ptx.Shadows.WebSocket.reconnect;;
        let _re_connect = Ptx.Shadows.WebSocket._re_connect;

        if (reconnect === undefined || reconnect === null) {
            let hdlrOpen;
            let hdlrReconnectReschedule = function(ws, evnt) {
                delete Ptx.Shadows.WebSocket.connection_state_open;

                {
                    let hdlrExternal = Ptx.Shadows.WebSocket.handlerDrop;

                    if (hdlrExternal && hdlrExternal !== null) {
                        webSocketLog('Drop on reschedule - external handler present, executing it:', hdlrExternal);
                        if (hdlrExternal(ws, evnt) !== false) {
                            return;
                        }
                    }
                }

                Wicket.Event.unsubscribe(Wicket.Event.Topic.WebSocket.Closed, hdlrReconnectReschedule);
                Wicket.Event.unsubscribe(Wicket.Event.Topic.WebSocket.Error, hdlrReconnectReschedule);
                Wicket.Event.unsubscribe(Wicket.Event.Topic.WebSocket.Opened, hdlrOpen);

                Ptx.setTimeoutR(Ptx.Shadows.WebSocket.reconnect, 5000, 'WS reconnect');
                delete Ptx.Shadows.WebSocket.handler;

                (() => {
                    try {
                        Wicket.WebSocket.close();
                    } catch (e) {
                        console.error("Connection on close error:", e);
                    }
                })();

                webSocketErr('Failed to establish/got dropped WebSocket connection, scheduled reconnect in 5 seconds', ws, evnt, arguments);
            };
            hdlrOpen = () => {
                Wicket.Event.unsubscribe(Wicket.Event.Topic.WebSocket.Opened, hdlrOpen);

                webSocketLog('Established WebSocket connection, starting subscribe.');
                Ptx.Shadows.WebSocket.connection_state_open = true;
                document.dispatchEvent(new CustomEvent('Ptx_Shadows_WebSocket_connection_state_open', {}));

                _re_connect();
            };

            Ptx.Shadows.WebSocket.reconnect = reconnect = () => {
                Wicket.Event.subscribe(Wicket.Event.Topic.WebSocket.Opened, hdlrOpen);
                Wicket.Event.subscribe(Wicket.Event.Topic.WebSocket.Closed, hdlrReconnectReschedule);
                Wicket.Event.subscribe(Wicket.Event.Topic.WebSocket.Error, hdlrReconnectReschedule);

                try {
                    Ptx.Shadows.WebSocket.connect();
                } catch (e) {
                    console.error('WebSocket connect error:', e);
                    Ptx.setTimeoutR(reconnect, 5000, 'WS reconnect');
                    return;
                }
            };
        }

        if (_re_connect === undefined || _re_connect === null) {
            Ptx.Shadows.WebSocket._re_connect = _re_connect = () => {
                if (!Ptx.Shadows.WebSocket.handler) {
                    {
                        Ptx.Shadows.WebSocket.handler = function() {
                            webSocketDebug('Got push message:', arguments);

                            if (arguments !== null
                                && arguments.length > 1) {
                                if (arguments[1] === 'ping') {
                                    if (ptxIsCombatPage !== true) {
                                        webSocketDebug('Pinging "https://vmmo.vten.ru/tech/report/yg"');
                                        fetch('https://vmmo.vten.ru/tech/report/yg', {
                                            method: "GET",
                                            headers: { "Content-Type": "text/json", "Accept" : "application/json" }
                                        }).then((response) => {
                                            webSocketDebug('Got response', response);
                                        });
                                    }
                                } else if (arguments[1] === 'notification') {
                                    Ptx.setTimeout(function() { if (!Ptx.Shadows.interceptInProgress()) { Ptx.Shadows.Notice.show(); }}, 10);
                                } else if (arguments[1] === 'reload') {
                                    Ptx.setTimeout(() => { ptxLocReload(); }, 0);
                                }
                            }
                        }
                        Ptx.Shadows.WebSocket.handlerAjax = function() {
                            //  
                            if (arguments && arguments.length >= 2) {
                                let isPrepare = arguments[0].type === Wicket.Event.Topic.WebSocket.MessageAjaxContent;
                                let msg = arguments[1];
                                let msgId = arguments.length >= 4 ? arguments[3] : undefined;

                                if (isPrepare || (msgId && window.ptxIsERLogged)) {
                                    let tme = arguments.length >= 3 ? arguments[2] : undefined;

                                    if (tme) {
                                        if (typeof(tme) === 'number' && tme > (isPrepare ? 10 : 30)) {
                                            Ptx.setTimeout(() => {
                                                webSocketDebug(
                                                        'WebSocket: ajax content message',
                                                        msgId,
                                                        isPrepare
                                                            ? 'parsing and preparing'
                                                            : 'parsing, preparing and processing',
                                                        'took', tme, 'msecs'
                                                );
                                            }, 0);
                                        }
                                    } else {
                                        tme = 'unknown';
                                    }

                                    if (msgId && window.ptxIsERLogged) {
                                        queueMicrotask(() => { Wicket.WebSocket.send('#' + msgId + (isPrepare ? ' prepared' : ' processed') + ' in ' + tme + ' msec'); });
                                    }

                                    if (isPrepare) {
                                        Ptx.setTimeout(() => { webSocketDebug('Got push AJAX message with id:', msgId, msg); }, 0);
                                    }
                                }
                            } else {
                                webSocketDebug('Got push AJAX message:', arguments);
                            }
                        }
                    }
                    let subscribe = () => {
                        try {
                            Wicket.WebSocket.send('pageId: ' + window.ptxPageId);
                        } catch (e) {
                            webSocketErr('Unable to report back page display');
                        }

                        webSocketWarn('Subscribing WS');
                        {
                            let handler = Ptx.Shadows.WebSocket.handler;

                            if (handler === undefined || handler === null) {
                                webSocketWarn('Subscribe WS failed: handler not present');
                                return;
                            }

                            Wicket.Event.subscribe(Wicket.Event.Topic.WebSocket.Message, handler);
                        }
                        {
                            let handler = Ptx.Shadows.WebSocket.handlerAjax;

                            if (handler === undefined || handler === null) {
                                Wicket.Event.unsubscribe(Wicket.Event.Topic.WebSocket.Message, Ptx.Shadows.WebSocket.handler);
                                webSocketWarn('Subscribe WS failed: handler not present');
                                return;
                            }

                            Wicket.Event.subscribe(Wicket.Event.Topic.WebSocket.MessageAjaxContent, handler);
                            Wicket.Event.subscribe(Wicket.Event.Topic.WebSocket.MessageAjaxContentProcessed, handler);
                        }
                        webSocketWarn('Subscribed WS');

                        Ptx.setTimeoutR(() => {
                            if (Ptx.Shadows.WebSocket.connection_state_open !== true) {
                                Wicket.Event.unsubscribe(Wicket.Event.Topic.WebSocket.Message, Ptx.Shadows.WebSocket.handler);
                                Wicket.Event.unsubscribe(Wicket.Event.Topic.WebSocket.MessageAjaxContent, Ptx.Shadows.WebSocket.handlerAjax);
                                Wicket.Event.unsubscribe(Wicket.Event.Topic.WebSocket.MessageAjaxContentProcessed, Ptx.Shadows.WebSocket.handlerAjax);
                                delete Ptx.Shadows.WebSocket.handler;
                                delete Ptx.Shadows.WebSocket.handlerAjax;

                                webSocketLog('External handler setting up skipped');
                                return;
                            }

                            Ptx.Shadows.WebSocket.handlerDrop = function(ws, evnt) {
                                Ptx.Shadows.WebSocket.handlerDrop = null;
                                Wicket.Event.unsubscribe(Wicket.Event.Topic.WebSocket.Message, Ptx.Shadows.WebSocket.handler);
                                Wicket.Event.unsubscribe(Wicket.Event.Topic.WebSocket.MessageAjaxContent, Ptx.Shadows.WebSocket.handlerAjax);
                                Wicket.Event.unsubscribe(Wicket.Event.Topic.WebSocket.MessageAjaxContentProcessed, Ptx.Shadows.WebSocket.handlerAjax);
                                delete Ptx.Shadows.WebSocket.handler;
                                delete Ptx.Shadows.WebSocket.handlerAjax;
                                webSocketLog('Dropped WebSocket handlers on connection close/error:', ws, evnt, arguments);

                                if (!evnt || evnt.type !== 'close' || evnt.wasClean !== true) {
                                    try {
                                        Wicket.WebSocket.close();
                                    } catch (e) {
                                        console.error("Connection on close error:", e);
                                    }

                                    if (!Ptx.Shadows.WebSocket.suppressReconnect) {
                                        webSocketLog('Reconnect initiated');
                                        queueMicrotask(Ptx.Shadows.WebSocket.reconnect);
                                    } else {
                                        webSocketLog('Reconnect suppressed');
                                    }

                                    return true;
                                } else {
                                    webSocketLog('Do not start urgent reconnect procedure on clean close');
                                    return false;
                                }
                            };

                            webSocketLog('External handler set up');
                        }, 1000, 'WS external handler setter');
                    };

                    if (Ptx.Shadows.WebSocket.connection_state_open) {
                        subscribe();
                    } else {
                        Ptx.eventListenerAddPB(document, 'Ptx_Shadows_WebSocket_connection_state_open', subscribe);
                    }

                    Ptx.eventListenerAdd(window, 'unload', (ev) => {
                        if (!ev.ptxGenericNotification) {
                            Ptx.Shadows.WebSocket.suppressReconnect = true;
                            webSocketLog('Marked reconnect suppressed');
                            Wicket.WebSocket.close();
                            delete Ptx.Shadows.WebSocket.handler;
                            webSocketWarn('Closed Wicket.WebSocket');
                        } else {
                            webSocketLog('Do not mark reconnect as suppressed on generic unload');
                        }
                    });
                    webSocketLog('WS subscriber set up');
                }
            };
        }

        {
            let checker = () => {
                if (window.Wicket
                        && Wicket.WebSocket
                        && Wicket.WebSocket.INSTANCE
                        && Wicket.WebSocket.INSTANCE.ws
                        && !isConnectionValid()) {
                    webSocketWarn('WebSocket connection in invalid ready state:', Wicket.WebSocket.INSTANCE.ws.readyState, 'reconnecting');
                    delete Ptx.Shadows.WebSocket.handler;

                    try {
                        Wicket.WebSocket.close();
                    } catch (e) {
                        console.error("Connection on close error:", e);
                    }

                    reconnect();
                }
            };

            checker();
            Ptx.setIntervalR(checker, 1000, 'WS alive status checker');
        }

        {
            let state;

            if (isConnectionValid()) {
                _re_connect();
            } else {
                if (Ptx.Shadows.WebSocket.init_Ptx_Shadows_webSocket_connect === true) {
                    reconnect();
                } else {
                    Ptx.eventListenerAddPB(document, 'init_Ptx_Shadows_webSocket_connect', () => reconnect());
                }
            }
        }
    })();
/*]]>*/
</script>
<script type="text/javascript" >
/*<![CDATA[*/
(() => {
    'use strict';
    if (window.ptxLogsOn) {console.warn('Init sounds script executed');}

    if (!window.Ptx) {
        window.Ptx = {};
    }

    if (!Ptx.Shadows) {
        Ptx.Shadows = {};
    }

    Ptx.performOnLoadPB(() => {
        try {
            initSounds(false, false, "0,3", "0,2");

            try {
                if ("" === "none") {
                    ceaseMusic();
                } else if ("".length > 0) {
                    Ptx.nvlC(Ptx.Shadows.Sounds, e => e.soundMarkerAmbient = "");
                    trySound("");
                }
            } catch (e) {
                console.error('Ambient sound play error: ', e);
            }
        } catch (e) {
            console.error('Sound init error: ', e);
        }
    }, undefined, true);
})();
/*]]>*/
</script>
<link rel="stylesheet" type="text/css" href="/skin/lightui/css/common.css?v=1765963391098" />
<script type="text/javascript" defer="defer" spa_ignore="true" src="/scripts/howler.js?v=1765963391098"></script>
<script type="text/javascript" defer="defer" spa_ignore="true" src="/scripts/sounds.js?v=1765963391098"></script>
<script type="text/javascript" id="notice_vars">
/*<![CDATA[*/

        (() => {
    'use strict';
    
    Ptx.eventListenerAddPB(document, 'DOMContentLoaded', () => {
        'use strict';
        var CDATALog = Ptx.Utils.Console({source: 'CDATA'});

        if (!window.Ptx) {
            window.Ptx = {};
        }

        if (!Ptx.Shadows) {
            Ptx.Shadows = {};
        }

        CDATALog('Notice object:', Ptx.Shadows.Notice);

        if (!Ptx.Shadows.Notice) {
            Ptx.Shadows.Notice = {};
        }

        var block = Ptx.Shadows.Notice;

        block.urlGetNotice = 'https://vmmo.vten.ru/basin/combat?10-IEndpointBehaviorListener.1-';
        block.urlShowNotice = 'https://vmmo.vten.ru/basin/combat?10-IEndpointBehaviorListener.2-';
        block.urlCloseNotice = 'https://vmmo.vten.ru/basin/combat?10-IEndpointBehaviorListener.3-';

        CDATALog('Notice object after:', Ptx.Shadows.Notice);
    });
})();
    
/*]]>*/
</script>
<script type="text/javascript" id="quicktip_vars">
/*<![CDATA[*/

        (() => {
    'use strict';
    
    Ptx.eventListenerAddPB(document, 'DOMContentLoaded', () => {
        'use strict';
        var CDATALog = Ptx.Utils.Console({source: 'CDATA'});

        if (!window.Ptx) {
            window.Ptx = {};
        }

        if (!Ptx.Shadows) {
            Ptx.Shadows = {};
        }

        CDATALog('Quicktip object:', Ptx.Shadows.Quicktip);

        if (!Ptx.Shadows.Quicktip) {
            Ptx.Shadows.Quicktip = {};
        }

        Ptx.Shadows.Quicktip.urlGetQuicktip = 'https://vmmo.vten.ru/basin/combat?10-IEndpointBehaviorListener.4-';


        CDATALog('Quicktip object after:', Ptx.Shadows.Quicktip);
    });
})();
    
/*]]>*/
</script>
<script type="text/javascript" >
/*<![CDATA[*/
Wicket.Event.add(window, "domready", function(event) { 
Wicket.Ajax.ajax({"c":"id30","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-lnkReportBack","e":"click"});(() => {let lnk=document.getElementById('id30');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id30 found');}})();;
Wicket.Ajax.ajax({"c":"id32","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-lnkRecreate","e":"click"});(() => {let lnk=document.getElementById('id32');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id32 found');}})();;
Wicket.Ajax.ajax({"c":"id33","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-actorPanel-container-nameBlock-shuffle","e":"click"});(() => {let lnk=document.getElementById('id33');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id33 found');}})();;
Wicket.Ajax.ajax({"c":"id34","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-targetPanel-container-nameBlock-shuffle","e":"click"});(() => {let lnk=document.getElementById('id34');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id34 found');}})();;
Wicket.Ajax.ajax({"c":"id35","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-blkControlArea-lnkReportBack","e":"click","dep":[(attrs)=>{return { 'scrolled': document.getElementById('btfWrapper').pageXOffset || document.getElementById('btfWrapper').scrollLeft }}]});(() => {let lnk=document.getElementById('id35');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id35 found');}})();;
Wicket.Ajax.ajax({"c":"id36","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-btfBlock-areas-0-sideLeft-entities-1-entityPanel-unit-actOnLink","e":"click","ch":"caog_930240573|a"});(() => {let lnk=document.getElementById('id36');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id36 found');}})();;
Wicket.Ajax.ajax({"c":"id37","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-btfBlock-areas-0-sideLeft-entities-2-entityPanel-unit-actOnLink","e":"click","ch":"caog_372767398|a"});(() => {let lnk=document.getElementById('id37');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id37 found');}})();;
Wicket.Ajax.ajax({"c":"id38","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-btfBlock-areas-0-sideLeft-entities-4-entityPanel-unit-actOnLink","e":"click","ch":"caog_969490107|a"});(() => {let lnk=document.getElementById('id38');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id38 found');}})();;
Wicket.Ajax.ajax({"c":"id39","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-btfBlock-areas-0-sideRight-entities-0-entityPanel-unit-actOnLink","e":"click","ch":"caog_1995857974|a"});(() => {let lnk=document.getElementById('id39');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id39 found');}})();;
Wicket.Ajax.ajax({"c":"id3a","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-btfBlock-areas-0-sideRight-entities-1-entityPanel-unit-actOnLink","e":"click","ch":"caou_82066639|a"});(() => {let lnk=document.getElementById('id3a');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id3a found');}})();;
Wicket.Ajax.ajax({"c":"id3b","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-btfBlock-areas-0-sideRight-entities-2-entityPanel-unit-actOnLink","e":"click","ch":"caog_1574809578|a"});(() => {let lnk=document.getElementById('id3b');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id3b found');}})();;
Wicket.Ajax.ajax({"c":"id3c","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-btfBlock-areas-0-sideRight-entities-3-entityPanel-unit-actOnLink","e":"click","ch":"caog_1001462566|a"});(() => {let lnk=document.getElementById('id3c');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id3c found');}})();;
Wicket.Ajax.ajax({"c":"ptx_combat_rich2_attack_link","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-controls-controlsInner-attackBlock-attackBlockInner-attackLink","e":"click","ch":"ca_1560596865|a","bh":[(attrs)=>{try{ptxCmbtCallback(attrs.event.timeStamp, 'btn_attack');} catch(e) {} try { Ptx.nvlC(document.getElementById('id3d'), (el) => { el.classList.add('_active'); Ptx.setTimeout(() => el.classList.remove('_active'), 200); }); } catch(e) {}}],"dep":[(attrs)=>{try{return { 'tmt': performance.now() - attrs.event.timeStamp }}catch(e){} return {}}]});(() => {let lnk=document.getElementById('ptx_combat_rich2_attack_link');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #ptx_combat_rich2_attack_link found');}})();;
Wicket.Ajax.ajax({"c":"id3e","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-controls-controlsInner-skills-0-skillBlock-skillBlockInner-skillLink","e":"click","ch":"cam_Valor_190431468|a","bh":[(attrs)=>{try{ptxCmbtCallback(attrs.event.timeStamp, 'amulet_Valor');} catch(e) {} try { Ptx.nvlC(document.getElementById('id3f'), (el) => { el.classList.add('_active'); Ptx.setTimeout(() => el.classList.remove('_active'), 200); }); } catch(e) {}}],"dep":[(attrs)=>{try{return { 'tmt': performance.now() - attrs.event.timeStamp }}catch(e){} return {}}]});(() => {let lnk=document.getElementById('id3e');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id3e found');}})();;
Wicket.Ajax.ajax({"c":"id40","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-controls-controlsInner-skills-1-skillBlock-skillBlockInner-skillLink","e":"click","ch":"cam_LightingHit_997166762|a","bh":[(attrs)=>{try{ptxCmbtCallback(attrs.event.timeStamp, 'amulet_LightingHit');} catch(e) {} try { Ptx.nvlC(document.getElementById('id41'), (el) => { el.classList.add('_active'); Ptx.setTimeout(() => el.classList.remove('_active'), 200); }); } catch(e) {}}],"dep":[(attrs)=>{try{return { 'tmt': performance.now() - attrs.event.timeStamp }}catch(e){} return {}}]});(() => {let lnk=document.getElementById('id40');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id40 found');}})();;
Wicket.Ajax.ajax({"c":"id42","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-controls-controlsInner-skills-2-skillBlock-skillBlockInner-skillLink","e":"click","ch":"cam_FrostBolt_1257522127|a","bh":[(attrs)=>{try{ptxCmbtCallback(attrs.event.timeStamp, 'amulet_FrostBolt');} catch(e) {} try { Ptx.nvlC(document.getElementById('id43'), (el) => { el.classList.add('_active'); Ptx.setTimeout(() => el.classList.remove('_active'), 200); }); } catch(e) {}}],"dep":[(attrs)=>{try{return { 'tmt': performance.now() - attrs.event.timeStamp }}catch(e){} return {}}]});(() => {let lnk=document.getElementById('id42');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id42 found');}})();;
Wicket.Ajax.ajax({"c":"id44","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-controls-controlsInner-skills-3-skillBlock-skillBlockInner-skillLink","e":"click","ch":"cam_Enrage_983321471|a","bh":[(attrs)=>{try{ptxCmbtCallback(attrs.event.timeStamp, 'amulet_Enrage');} catch(e) {} try { Ptx.nvlC(document.getElementById('id45'), (el) => { el.classList.add('_active'); Ptx.setTimeout(() => el.classList.remove('_active'), 200); }); } catch(e) {}}],"dep":[(attrs)=>{try{return { 'tmt': performance.now() - attrs.event.timeStamp }}catch(e){} return {}}]});(() => {let lnk=document.getElementById('id44');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id44 found');}})();;
Wicket.Ajax.ajax({"c":"id46","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-controls-controlsInner-skills-4-skillBlock-skillBlockInner-skillLink","e":"click","ch":"cam_Evade_1391852532|a","bh":[(attrs)=>{try{ptxCmbtCallback(attrs.event.timeStamp, 'amulet_Evade');} catch(e) {} try { Ptx.nvlC(document.getElementById('id47'), (el) => { el.classList.add('_active'); Ptx.setTimeout(() => el.classList.remove('_active'), 200); }); } catch(e) {}}],"dep":[(attrs)=>{try{return { 'tmt': performance.now() - attrs.event.timeStamp }}catch(e){} return {}}]});(() => {let lnk=document.getElementById('id46');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id46 found');}})();;
Wicket.Ajax.ajax({"c":"id48","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-controls-controlsInner-beltItems-0-itemBlock-itemBlockInner-itemLink","e":"click","ch":"cp_1835290974|a","bh":[(attrs)=>{try{ptxCmbtCallback(attrs.event.timeStamp, 'potion_109_01');} catch(e) {} try { Ptx.nvlC(document.getElementById('id49'), (el) => { el.classList.add('_active'); Ptx.setTimeout(() => el.classList.remove('_active'), 200); }); } catch(e) {}}],"dep":[(attrs)=>{try{return { 'tmt': performance.now() - attrs.event.timeStamp }}catch(e){} return {}}]});(() => {let lnk=document.getElementById('id48');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id48 found');}})();;
Wicket.Ajax.ajax({"c":"id4a","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-controls-controlsInner-beltItems-1-itemBlock-itemBlockInner-itemLink","e":"click","ch":"cp_1724853828|a","bh":[(attrs)=>{try{ptxCmbtCallback(attrs.event.timeStamp, 'potion_184_01');} catch(e) {} try { Ptx.nvlC(document.getElementById('id4b'), (el) => { el.classList.add('_active'); Ptx.setTimeout(() => el.classList.remove('_active'), 200); }); } catch(e) {}}],"dep":[(attrs)=>{try{return { 'tmt': performance.now() - attrs.event.timeStamp }}catch(e){} return {}}]});(() => {let lnk=document.getElementById('id4a');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id4a found');}})();;
Wicket.Ajax.ajax({"c":"id4c","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-controls-controlsInner-beltItems-2-itemBlock-itemBlockInner-itemLink","e":"click","ch":"cp_1036210447|a","bh":[(attrs)=>{try{ptxCmbtCallback(attrs.event.timeStamp, 'potion_102_01');} catch(e) {} try { Ptx.nvlC(document.getElementById('id4d'), (el) => { el.classList.add('_active'); Ptx.setTimeout(() => el.classList.remove('_active'), 200); }); } catch(e) {}}],"dep":[(attrs)=>{try{return { 'tmt': performance.now() - attrs.event.timeStamp }}catch(e){} return {}}]});(() => {let lnk=document.getElementById('id4c');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id4c found');}})();;
Wicket.Ajax.ajax({"c":"id4e","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-controls-controlsInner-gadgets-0-itemBlock-itemBlockInner-itemLink","e":"click","ch":"cg_1235789852|a","bh":[(attrs)=>{try{ptxCmbtCallback(attrs.event.timeStamp, 'gadget_NY2019Special_gift');} catch(e) {} try { Ptx.nvlC(document.getElementById('id4f'), (el) => { el.classList.add('_active'); Ptx.setTimeout(() => el.classList.remove('_active'), 200); }); } catch(e) {}}],"dep":[(attrs)=>{try{return { 'tmt': performance.now() - attrs.event.timeStamp }}catch(e){} return {}}]});(() => {let lnk=document.getElementById('id4e');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id4e found');}})();;
Wicket.Ajax.ajax({"c":"id50","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-controls-controlsInner-gadgets-1-itemBlock-itemBlockInner-itemLink","e":"click","ch":"cg_496652436|a","bh":[(attrs)=>{try{ptxCmbtCallback(attrs.event.timeStamp, 'gadget_i3027-FlyingMasks2');} catch(e) {} try { Ptx.nvlC(document.getElementById('id51'), (el) => { el.classList.add('_active'); Ptx.setTimeout(() => el.classList.remove('_active'), 200); }); } catch(e) {}}],"dep":[(attrs)=>{try{return { 'tmt': performance.now() - attrs.event.timeStamp }}catch(e){} return {}}]});(() => {let lnk=document.getElementById('id50');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id50 found');}})();;
Wicket.Ajax.ajax({"c":"id52","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-controls-controlsInner-gadgets-2-itemBlock-itemBlockInner-itemLink","e":"click","ch":"cg_1608044326|a","bh":[(attrs)=>{try{ptxCmbtCallback(attrs.event.timeStamp, 'gadget_i6211-shadows_mirror_1');} catch(e) {} try { Ptx.nvlC(document.getElementById('id53'), (el) => { el.classList.add('_active'); Ptx.setTimeout(() => el.classList.remove('_active'), 200); }); } catch(e) {}}],"dep":[(attrs)=>{try{return { 'tmt': performance.now() - attrs.event.timeStamp }}catch(e){} return {}}]});(() => {let lnk=document.getElementById('id52');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id52 found');}})();;
Wicket.Ajax.ajax({"c":"id54","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-customsContainerPlain-blockInner-customPanels-0-panel-sources-sources-0-link","e":"click"});(() => {let lnk=document.getElementById('id54');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id54 found');}})();;
Wicket.Ajax.ajax({"c":"id55","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-customsContainerPlain-blockInner-customPanels-0-panel-sources-sources-1-link","e":"click"});(() => {let lnk=document.getElementById('id55');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id55 found');}})();;
Wicket.Ajax.ajax({"c":"id56","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-customsContainerPlain-blockInner-customPanels-0-panel-sources-sources-2-link","e":"click"});(() => {let lnk=document.getElementById('id56');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id56 found');}})();;
Wicket.Ajax.ajax({"c":"id57","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-customsContainerPlain-blockInner-customPanels-0-panel-sources-sources-3-link","e":"click"});(() => {let lnk=document.getElementById('id57');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id57 found');}})();;
Wicket.Ajax.ajax({"c":"id58","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-customsContainerPlain-blockInner-customPanels-0-panel-sources-sources-4-link","e":"click"});(() => {let lnk=document.getElementById('id58');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id58 found');}})();;
Wicket.Ajax.ajax({"c":"id59","u":"https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-customsContainerPlain-blockInner-customPanels-0-panel-sources-sources-5-link","e":"click"});(() => {let lnk=document.getElementById('id59');if (lnk) {lnk.inited_ajax=true;lnk.dispatchEvent(new CustomEvent('inited_ajax', {"bubbles":false}));}else{console.log('No element #id59 found');}})();;
;(() => {
	'use strict';
    if (!window.Ptx) {
        window.Ptx = {};
    }

    if (!Ptx.Shadows) {
        Ptx.Shadows = {};
    }

    if (!Ptx.Shadows.WebSocket) {
        Ptx.Shadows.WebSocket = {};
    }

    Ptx.Shadows.WebSocket.params = {
        pageId: 10,  context: 'com.playtox.shadows.wicket.pages.basin.BasinPage', resourceName: '', connectionToken: '',
        baseUrl: 'basin/combat', contextPath: '', appName: 'WicketApplicationFilter',
        port: 0, securePort: 0, filterPrefix: ''
    };

    if (!Ptx.Shadows.WebSocket.connect) {
        Ptx.Shadows.WebSocket.connect = () => {
            'use strict';
            let params = Ptx.Shadows.WebSocket.params;
            jQuery.extend(Wicket.WebSocket, params);
            Wicket.WebSocket.createDefaultConnection();
            if (window.ptxLogsOn) { console.log('Created connection template with parameters ' + JSON.stringify(params), params); }
        };
        Ptx.Shadows.WebSocket.init_Ptx_Shadows_webSocket_connect = true;
        document.dispatchEvent(new CustomEvent("init_Ptx_Shadows_webSocket_connect", {}));
    }
})();
;
;});
/*]]>*/
</script>
</head>
<body id="body_id" class="body">
<span id="pageTopA"></span>

        
    



<div class="fake">
<link rel="stylesheet" type="text/css" href="/skin/lightui/css/common.css?v=1765963391098" />
<link rel="stylesheet" type="text/css" href="/skin/lightui/css/fight-styles.css?v=1765963391098" />

</div>


<div class="viewport">
<div id="background" class="bg-layer">

</div>
</div>
<div class="b-container" id="bodyContainer">

<div>

</div>
<div class="header _combat">

<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody>
<tr>
<td>
<span class="header-hp" id="id5a"> <span class="i12 i12-heart_100"></span><span class="info">101430</span></span>
<span class="header-shield" id="id5b" style="display: none;">
<img src="/images/icons/school.png" alt="">0
</span>
<span class="header-buffs">
<span><img src="/images/icons/crit.png" alt="" class="i12img" width="12" height="12"/></span><span><img src="/images/icons/scroll.png" alt="" class="i12img" width="12" height="12"/></span><span><img src="/images/icons/regen.png" alt="" class="i12img" width="12" height="12"/></span><span><img src="/images/icons/companion.png" alt="" class="i12img" width="12" height="12"/></span><span><img src="/images/icons/dailygifts/postupsmerti_12x12.png" alt="" class="i12img" width="12" height="12"/></span><span><img src="/images/icons/scroll.png" alt="" class="i12img" width="12" height="12"/></span><span><img src="/images/icons/crit.png" alt="" class="i12img" width="12" height="12"/></span><span><img src="/images/icons/basic_dark.png" alt="" class="i12img" width="12" height="12"/></span>
</span>
<span class="header-inventory" id="id5c">


<img src="/images/icons/rack.png" class="i12img" width="12" height="12" alt=""/>


</span>
<span class="header-timer" id="id5d" style="display: none;"><img src="/images/icons/clock.png" alt=""/><span class="minor"></span></span>
<span class="header-pets" id="id5e" style="display: none;">

</span>
<span class="header-custom">
<span id="id5f" style="display: none;"> | </span>
</span>
</td>
<td align="right" id="id60" style="display: none;">
<div class="header-gold">
<div class="header-gold-info">

</div>
<a class="header-gold-link" data-on-click-sound="ui profile-open" href="https://vmmo.vten.ru/billing/info?ctx=status_link"></a>
</div>
</td>
</tr>
</tbody>
</table>

<div style="clear:both"></div>

<a href="#" id="sound-control" class="desktop-setting-mute" ignorewebview="true" draggable="false"></a>
<script type="text/javascript">
/*<![CDATA[*/
(() => {'use strict'; Ptx.eventListenerAddPB(window, 'load', () => Ptx.nvlC(document.getElementById("sound-control"), (e) => e.disabled = false));})();
/*]]>*/
</script>


</div>


<div id="id61" style="display: none;">


<script id="ptxScriptFB1" type="text/javascript">
/*<![CDATA[*/

Ptx.eventListenerAddPB(document, 'DOMContentLoaded', () => {
'use strict';
var nodeFB = document.getElementById('ptxScriptFB1').parentNode;
if (window.ptxLogsOn) {console.log("Feedback node: ", nodeFB, ", style: " + nodeFB.style + ", display: " + nodeFB.style.display);}
if (!(nodeFB.hidden || nodeFB.style.display === 'none')
&& nodeFB.querySelector('._notification-cta') !== null) {
var el = document.getElementById('bodyContainer');
if (el && el !== null) {
el.classList.add('_notifications-present');
}
}
});

/*]]>*/
</script>
</div>



<div><div id="id62">
<a style="display: none;" id="id30" ignoreWebView="true" href="javascript:;"></a>

        <script spa_ignore="true">
            if (!window.Ptx) {
                Ptx = {};
            }

            if (!Ptx.Shadows) {
                Ptx.Shadows = {};
            }

            if (!Ptx.Shadows.Anim) {
                Ptx.Shadows.Anim = {};
            }

            (() => {
                'use strict';
                console.log('Init sounds script executed');

                let justInit = () => {
                    try {
                        initSounds(false, false, "0,3", "0,2");
                    } catch (e) {
                        console.error('Sound init error: ', e);
                    }
                }

                if ( document.readyState === "complete" ||
                    ( document.readyState !== "loading" && !document.documentElement.doScroll ) ) {
                    justInit();
                } else {
                    Ptx.eventListenerAddPB(document, "DOMContentLoaded", justInit, undefined, true);
                }
            })();
        </script>

        <script>
            (() => {
                'use strict';
                let playAmbient = () => {
                    try {
                        if ("" === "none") {
                            ceaseMusic();
                        } else if ("".length > 0) {
                            trySound("");
                        } else {
                            trySound("combat ambient-1");
                        }
                    } catch (e) {
                        console.error('Ambient sound play error: ', e);
                    }
                }

                if ( document.readyState === "complete" ||
                    ( document.readyState !== "loading" && !document.documentElement.doScroll ) ) {
                    playAmbient();
                } else {
                    Ptx.eventListenerAddPB(document, "DOMContentLoaded", playAmbient, undefined, true);
                }
            })();
        </script>
        
    
<script id="id63">
        (() => {
            'use strict';

            if (!window.Ptx) {
                Ptx = {};
            }

            if (!Ptx.Shadows) {
                Ptx.Shadows = {};
            }

            if (!Ptx.Shadows.Combat) {
                Ptx.Shadows.Combat = {};
            }

            Ptx.Shadows.Combat.lootTakeUrl = 'https://vmmo.vten.ru/basin/combat?10-IEndpointBehaviorListener.2-combatPanel-container&pdti=';
        })();
    </script>
<div class="wrap-battlefield ym-hide-content _basin _expanded" id="id64">
<a style="display: none;" id="id32" ignoreWebView="true" href="javascript:;"></a>
<div style="display: none;" id="id31"></div>
<div style="display: none;" id="id65"></div>
<div></div>
<div class="battlefield-modal" id="id66" style="display: none;"><div class="battlefield-modal-inner">
    <div>${msg}</div>
    <a href="https://vmmo.vten.ru/basin/combat?10-1.IBehaviorListener.0-combatPanel-container-battlefield-infoPanel" class="button _for-center _glowpulse">
        <span class="button-inner">
            <span class="button-text font14">${actionText}</span>
        </span>
    </a>
</div></div>
<div class="battlefield-head">
<div class="battlefield-head-left" id="id67"><div id="id68">
<div>

<a class="foot-info-link-profile" draggable="false" href="https://vmmo.vten.ru/user/239299464?u=https://vmmo.vten.ru/basin/combat%3F10">
<div class="menu-ava-img" id="id69" style="background-image:url(&#039;/manekenimage/x129/y16/w55/h55/decorBg:Under_back_Profile_640_380/mnkfhdd02:body-d_f_skin-0/mnkfd02:body-d_f_cloth-0/ifch00:20_Ice_chestF/ishldr00:Laty1/ihd00:ShlemDoblesti/ish00:EpicTitanShield/iwpn00:20_Ice_gun/iartfus2:artifact_mask_2_640/1691217144.jpg&#039;)"></div>
<div class="foot-menu-lvl">29 .</div>
<div class="battlefield-head-pet" id="id6a" style="background-image:url(&#039;/images/pets/iconpet/icon_executioner_pet_32.png&#039;)">
<div class="wrap-battlefield-head-pet-hp">
<svg version="1.1" baseProfile="full" class="battlefield-head-pet-hp" xmlns="http://www.w3.org/2000/svg" id="id6b">
<circle cx="50%" cy="50%" r="43%" style="stroke-dasharray: 0%, 300%;"></circle>
</svg>
</div>
</div>
</a>

<div class="battlefield-head-name" id="id6c">
<a class="shuffle-group-link" draggable="false" id="id33" ignoreWebView="true" href="javascript:;" style="display: none;" title=" "></a>
Qing Dynasty
</div>
<div class="battlefield-head-hp">
<div class="battlefield-head-hp-fill" style="width: 100%" id="id6d">
<div class="shadowDeath-lvl" style="display: none;"></div>
<div class="battlefield-head-hp-delta" style="width: 0%"></div>
</div>
<div class="battlefield-head-hp-text" id="id6e">101.4K / 101.4K</div>
</div>

<div class="battlefield-head-buffs" id="id6f">


<div class="buff" id="id70">
<div>
<img class="buff-img" width="12" height="12" src="/images/icons/enchant.png">
<div class="buff-counter">
<svg version="1.1" baseProfile="full" class="circle-progress-fill" xmlns="http://www.w3.org/2000/svg" id="id71">
<circle cx="50%" cy="50%" r="43%" style="stroke-dasharray: 282%, 300%;"></circle>
</svg>
</div>
</div>
</div>

<div class="buff" id="id72">
<div>
<img class="buff-img" width="12" height="12" src="/images/icons/crit.png">
<div class="buff-counter">
<svg version="1.1" baseProfile="full" class="circle-progress-fill" xmlns="http://www.w3.org/2000/svg" id="id73">
<circle cx="50%" cy="50%" r="43%" style="stroke-dasharray: 282%, 300%;"></circle>
</svg>
</div>
</div>
</div>

</div>
</div>
</div></div>
<div class="battlefield-head-right" id="id74"><div id="id75">
<div>

<span class="foot-info-link-profile">
<img draggable="false" src="/images/npcs/mobs/mob_2.png">
</span>

<div class="battlefield-head-name" id="id76">
<a class="shuffle-group-link" draggable="false" id="id34" ignoreWebView="true" href="javascript:;" style="display: none;" title=" "></a>

</div>
<div class="battlefield-head-hp">
<div class="battlefield-head-hp-fill" style="width: 75%" id="id77">
<div class="shadowDeath-lvl" style="display: none;"></div>
<div class="battlefield-head-hp-delta" style="width: 2%"></div>
</div>
<div class="battlefield-head-hp-text" id="id78">197.8K / 264.3K</div>
</div>

<div class="battlefield-head-buffs" id="id79">


</div>
</div>
</div></div>
</div>


<div class="battlefield-anim">
<div class="battlefield-anim-part"></div>
<div class="battlefield-anim-part"></div>
<div class="battlefield-anim-part"></div>
<div class="battlefield-anim-part"></div>
</div>
<div class="battlefield-effect">
<div class="battlefield-effect-part">
<div class="battlefield-effect-subpart"></div>
</div>
<div class="battlefield-effect-part-2">
<div class="battlefield-effect-subpart"></div>
</div>
<div class="battlefield-effect-part-3">
<div class="battlefield-effect-subpart"></div>
</div>
<div class="battlefield-effect-part-4">
<div class="battlefield-effect-subpart"></div>
</div>
<div class="battlefield-effect-part-5">
<div class="battlefield-effect-subpart"></div>
</div>
</div>
<div class="battlefield-mutable-parts">
<div class="battlefield-mutable-part"></div>
<div class="battlefield-mutable-part"></div>
<div class="battlefield-mutable-part"></div>
<div class="battlefield-mutable-part"></div>
</div>

<div class="battlefield-lore">
<div class="battlefield-lore-inner" id="id7a">

</div>
</div>
<div id="ptx_connection_alert_el" class="connection-alert" style="display: none">
<div class="connection-alert-image"></div>
<span class="connection-alert-text"> </span>
</div>
<div id="btfWrapper" class="battlefield">
<div class="battlefield-inner" id="id7b">
<div class="area">
<div id="id7c" class="source _magic">
    <div class="source-img" style="opacity: 0.948"></div>
    <div class="source-progress">
        <div class="source-progress-text">95%</div>
        <div class="source-progress-fill" style="width: 95%"></div>
    </div>
    </div>
<div class="area-side left-side" id="id7d">
<div class="place" id="id7e">
<div class="place-proj-img"></div>
<div class="place-combat-text"></div>
<div class="combat-entity-panel" id="id7f"></div>
</div><div class="place" id="id80">
<div class="place-proj-img"></div>
<div class="place-combat-text"></div>
<div class="combat-entity-panel" id="id81">
<div class="unit _unit-pos-12" id="unit_0__unit-pos-12">
<div style="display:none;" id="id82"></div>
<div class="unit-show _monk _tdm _fleshlike" id="id83">
<div class="unit-strip-props"></div>
<div class="unit-attack-props">
<div class="unit-attack-1">
<div class="unit-shoot"></div>
</div>
<div class="unit-attack-2">
<div class="unit-shoot"></div>
</div>
</div>
<div class="unit-cast-props">
<div class="unit-cast-1">
<div class="unit-shoot"></div>
</div>
<div class="unit-cast-2">
<div class="unit-shoot"></div>
</div>
</div>
<div class="unit-death-props">
<div class="death-props-explosion"></div>
<div class="death-props-smoke"></div>
<div class="death-props-particles"></div>
<div class="death-props-spots"></div>
<div class="death-props-drops"></div>
</div>

<div class="unit-layer-1">
<div class="get-img-1"></div>
<div class="get-img-2"></div>
<div class="get-img-3"></div>
<div class="bite-img-1"></div>
<div class="bite-img-2"></div>
<div class="buff-img-1"></div>
<div class="buff-img-2"></div>
<div class="buff-img-3"></div>
<div class="debuff-img-1"></div>
<div class="debuff-img-2"></div>
<div class="debuff-img-3"></div>
<div class="cast-aura-1"></div>
<div class="get-aura-1"></div>
<div class="proc-img-1"></div>
<div class="unit-marker"></div>
<div class="unit-layer-2">
<div class="unit-talk"></div>
<div class="unit-layer-3">

<div class="unit-img">
<div class="preload-img"></div>
</div>

<div class="frames-img"></div>
<div class="unit-idle-effects">
<div class="unit-idle-effect-1"></div>
<div class="unit-idle-effect-2"></div>
</div>
<div class="attack-plume"></div>
<div class="cast-plume"></div>
<div class="cast-img-wrap">
<div class="cast-img-1"></div>
<div class="cast-img-2"></div>
<div class="cast-img-3"></div>
<div class="cast-img-4"></div>
</div>
</div>
</div>
</div>
<div class="unit-hp" id="id84">
<div class="unit-hp-fill" style="width: 71%" id="id85"></div>
<div class="unit-amount" id="id86" title="0">6</div>
</div>

<div class="unit-death-img"></div>
</div>
<a class="unit-link" draggable="false" id="id36" ignoreWebView="true" href="javascript:;"></a>
<div class="unit-buffs" id="id87">


<div class="buff" id="id88">
<div>
<img class="buff-img" width="12" height="12" src="/images/icons/enchant.png">
<div class="buff-counter">
<svg version="1.1" baseProfile="full" class="circle-progress-fill" xmlns="http://www.w3.org/2000/svg" id="id89">
<circle cx="50%" cy="50%" r="43%" style="stroke-dasharray: 282%, 300%;"></circle>
</svg>
</div>
</div>
</div>

</div>
<div class="unit-pets" id="id8a">

</div>
</div>
</div>
</div><div class="place" id="id8b">
<div class="place-proj-img"></div>
<div class="place-combat-text"></div>
<div class="combat-entity-panel" id="id8c">
<div class="unit _unit-pos-13" id="unit_0__unit-pos-13">
<div style="display:none;" id="id8d"></div>
<div class="unit-show _warrior _tdm _fleshlike" id="id8e">
<div class="unit-strip-props"></div>
<div class="unit-attack-props">
<div class="unit-attack-1">
<div class="unit-shoot"></div>
</div>
<div class="unit-attack-2">
<div class="unit-shoot"></div>
</div>
</div>
<div class="unit-cast-props">
<div class="unit-cast-1">
<div class="unit-shoot"></div>
</div>
<div class="unit-cast-2">
<div class="unit-shoot"></div>
</div>
</div>
<div class="unit-death-props">
<div class="death-props-explosion"></div>
<div class="death-props-smoke"></div>
<div class="death-props-particles"></div>
<div class="death-props-spots"></div>
<div class="death-props-drops"></div>
</div>

<div class="unit-layer-1">
<div class="get-img-1"></div>
<div class="get-img-2"></div>
<div class="get-img-3"></div>
<div class="bite-img-1"></div>
<div class="bite-img-2"></div>
<div class="buff-img-1"></div>
<div class="buff-img-2"></div>
<div class="buff-img-3"></div>
<div class="debuff-img-1"></div>
<div class="debuff-img-2"></div>
<div class="debuff-img-3"></div>
<div class="cast-aura-1"></div>
<div class="get-aura-1"></div>
<div class="proc-img-1"></div>
<div class="unit-marker"></div>
<div class="unit-layer-2">
<div class="unit-talk"></div>
<div class="unit-layer-3">

<div class="unit-img">
<div class="preload-img"></div>
</div>

<div class="frames-img"></div>
<div class="unit-idle-effects">
<div class="unit-idle-effect-1"></div>
<div class="unit-idle-effect-2"></div>
</div>
<div class="attack-plume"></div>
<div class="cast-plume"></div>
<div class="cast-img-wrap">
<div class="cast-img-1"></div>
<div class="cast-img-2"></div>
<div class="cast-img-3"></div>
<div class="cast-img-4"></div>
</div>
</div>
</div>
</div>
<div class="unit-hp" id="id8f">
<div class="unit-hp-fill" style="width: 76%" id="id90"></div>
<div class="unit-amount" id="id91" title="0">2</div>
</div>

<div class="unit-death-img"></div>
</div>
<a class="unit-link" draggable="false" id="id37" ignoreWebView="true" href="javascript:;"></a>
<div class="unit-buffs" id="id92">


<div class="buff" id="id93">
<div>
<img class="buff-img" width="12" height="12" src="/images/icons/enchant.png">
<div class="buff-counter">
<svg version="1.1" baseProfile="full" class="circle-progress-fill" xmlns="http://www.w3.org/2000/svg" id="id94">
<circle cx="50%" cy="50%" r="43%" style="stroke-dasharray: 282%, 300%;"></circle>
</svg>
</div>
</div>
</div>

</div>
<div class="unit-pets" id="id95">

</div>
</div>
</div>
</div><div class="place" id="id96">
<div class="place-proj-img"></div>
<div class="place-combat-text"></div>
<div class="combat-entity-panel" id="id97">
<div class="unit _unit-pos-14" id="unit_0__unit-pos-14">
<div style="display:none;" id="id98"></div>
<div class="unit-show _warrior _tdf _fleshlike _iam _health100" id="id99">
<div class="unit-strip-props"></div>
<div class="unit-attack-props">
<div class="unit-attack-1">
<div class="unit-shoot"></div>
</div>
<div class="unit-attack-2">
<div class="unit-shoot"></div>
</div>
</div>
<div class="unit-cast-props">
<div class="unit-cast-1">
<div class="unit-shoot"></div>
</div>
<div class="unit-cast-2">
<div class="unit-shoot"></div>
</div>
</div>
<div class="unit-death-props">
<div class="death-props-explosion"></div>
<div class="death-props-smoke"></div>
<div class="death-props-particles"></div>
<div class="death-props-spots"></div>
<div class="death-props-drops"></div>
</div>

<div class="unit-layer-1">
<div class="get-img-1"></div>
<div class="get-img-2"></div>
<div class="get-img-3"></div>
<div class="bite-img-1"></div>
<div class="bite-img-2"></div>
<div class="buff-img-1"></div>
<div class="buff-img-2"></div>
<div class="buff-img-3"></div>
<div class="debuff-img-1"></div>
<div class="debuff-img-2"></div>
<div class="debuff-img-3"></div>
<div class="cast-aura-1"></div>
<div class="get-aura-1"></div>
<div class="proc-img-1"></div>
<div class="unit-marker"></div>
<div class="unit-layer-2">
<div class="unit-talk"></div>
<div class="unit-layer-3">

<div class="unit-img">
<div class="preload-img"></div>
</div>

<div class="frames-img"></div>
<div class="unit-idle-effects">
<div class="unit-idle-effect-1"></div>
<div class="unit-idle-effect-2"></div>
</div>
<div class="attack-plume"></div>
<div class="cast-plume"></div>
<div class="cast-img-wrap">
<div class="cast-img-1"></div>
<div class="cast-img-2"></div>
<div class="cast-img-3"></div>
<div class="cast-img-4"></div>
</div>
</div>
</div>
</div>
<div class="unit-hp" id="id9a">
<div class="unit-hp-fill" style="width: 100%" id="id9b"></div>
<div class="unit-amount" id="id9c" title="0">1</div>
</div>

<div class="unit-death-img"></div>
</div>
<span class="unit-link" draggable="false" id="id9d" ignoreWebView="true" title="Qing Dynasty"></span>
<div class="unit-buffs" id="id9e">


<div class="buff" id="id9f">
<div>
<img class="buff-img" width="12" height="12" src="/images/icons/enchant.png">
<div class="buff-counter">
<svg version="1.1" baseProfile="full" class="circle-progress-fill" xmlns="http://www.w3.org/2000/svg" id="ida0">
<circle cx="50%" cy="50%" r="43%" style="stroke-dasharray: 282%, 300%;"></circle>
</svg>
</div>
</div>
</div>

<div class="buff" id="ida1">
<div>
<img class="buff-img" width="12" height="12" src="/images/icons/crit.png">
<div class="buff-counter">
<svg version="1.1" baseProfile="full" class="circle-progress-fill" xmlns="http://www.w3.org/2000/svg" id="ida2">
<circle cx="50%" cy="50%" r="43%" style="stroke-dasharray: 282%, 300%;"></circle>
</svg>
</div>
</div>
</div>

</div>
<div class="unit-pets" id="ida3">

</div>
</div>
</div>
</div><div class="place" id="ida4">
<div class="place-proj-img"></div>
<div class="place-combat-text"></div>
<div class="combat-entity-panel" id="ida5">
<div class="unit _unit-pos-15" id="unit_0__unit-pos-15">
<div style="display:none;" id="ida6"></div>
<div class="unit-show _mage _tdm _fleshlike _buff-inflow" id="ida7">
<div class="unit-strip-props"></div>
<div class="unit-attack-props">
<div class="unit-attack-1">
<div class="unit-shoot"></div>
</div>
<div class="unit-attack-2">
<div class="unit-shoot"></div>
</div>
</div>
<div class="unit-cast-props">
<div class="unit-cast-1">
<div class="unit-shoot"></div>
</div>
<div class="unit-cast-2">
<div class="unit-shoot"></div>
</div>
</div>
<div class="unit-death-props">
<div class="death-props-explosion"></div>
<div class="death-props-smoke"></div>
<div class="death-props-particles"></div>
<div class="death-props-spots"></div>
<div class="death-props-drops"></div>
</div>

<div class="unit-layer-1">
<div class="get-img-1"></div>
<div class="get-img-2"></div>
<div class="get-img-3"></div>
<div class="bite-img-1"></div>
<div class="bite-img-2"></div>
<div class="buff-img-1"></div>
<div class="buff-img-2"></div>
<div class="buff-img-3"></div>
<div class="debuff-img-1"></div>
<div class="debuff-img-2"></div>
<div class="debuff-img-3"></div>
<div class="cast-aura-1"></div>
<div class="get-aura-1"></div>
<div class="proc-img-1"></div>
<div class="unit-marker"></div>
<div class="unit-layer-2">
<div class="unit-talk"></div>
<div class="unit-layer-3">

<div class="unit-img">
<div class="preload-img"></div>
</div>

<div class="frames-img"></div>
<div class="unit-idle-effects">
<div class="unit-idle-effect-1"></div>
<div class="unit-idle-effect-2"></div>
</div>
<div class="attack-plume"></div>
<div class="cast-plume"></div>
<div class="cast-img-wrap">
<div class="cast-img-1"></div>
<div class="cast-img-2"></div>
<div class="cast-img-3"></div>
<div class="cast-img-4"></div>
</div>
</div>
</div>
</div>
<div class="unit-hp" id="ida8">
<div class="unit-hp-fill" style="width: 69%" id="ida9"></div>
<div class="unit-amount" id="idaa" title="0">7</div>
</div>

<div class="unit-death-img"></div>
</div>
<a class="unit-link" draggable="false" id="id38" ignoreWebView="true" href="javascript:;"></a>
<div class="unit-buffs" id="idab">


<div class="buff" id="idac">
<div>
<img class="buff-img" width="12" height="12" src="/images/icons/enchant.png">
<div class="buff-counter">
<svg version="1.1" baseProfile="full" class="circle-progress-fill" xmlns="http://www.w3.org/2000/svg" id="idae">
<circle cx="50%" cy="50%" r="43%" style="stroke-dasharray: 282%, 300%;"></circle>
</svg>
</div>
</div>
</div>

</div>
<div class="unit-pets" id="idaf">

</div>
</div>
</div>
</div>
<div class="side-effect-1"></div>
<div class="side-effect-2"></div>
<div class="side-effect-3"></div>
</div>
<div class="area-side right-side" id="idb0">
<div class="place" id="idb1">
<div class="place-proj-img"></div>
<div class="place-combat-text"></div>
<div class="combat-entity-panel" id="idb2">
<div class="unit _unit-pos-21" id="unit_0__unit-pos-21">
<div style="display:none;" id="idb3"></div>
<div class="unit-show _mage _tlm _fleshlike _buff-inflow" id="idb4">
<div class="unit-strip-props"></div>
<div class="unit-attack-props">
<div class="unit-attack-1">
<div class="unit-shoot"></div>
</div>
<div class="unit-attack-2">
<div class="unit-shoot"></div>
</div>
</div>
<div class="unit-cast-props">
<div class="unit-cast-1">
<div class="unit-shoot"></div>
</div>
<div class="unit-cast-2">
<div class="unit-shoot"></div>
</div>
</div>
<div class="unit-death-props">
<div class="death-props-explosion"></div>
<div class="death-props-smoke"></div>
<div class="death-props-particles"></div>
<div class="death-props-spots"></div>
<div class="death-props-drops"></div>
</div>

<div class="unit-layer-1">
<div class="get-img-1"></div>
<div class="get-img-2"></div>
<div class="get-img-3"></div>
<div class="bite-img-1"></div>
<div class="bite-img-2"></div>
<div class="buff-img-1"></div>
<div class="buff-img-2"></div>
<div class="buff-img-3"></div>
<div class="debuff-img-1"></div>
<div class="debuff-img-2"></div>
<div class="debuff-img-3"></div>
<div class="cast-aura-1"></div>
<div class="get-aura-1"></div>
<div class="proc-img-1"></div>
<div class="unit-marker"></div>
<div class="unit-layer-2">
<div class="unit-talk"></div>
<div class="unit-layer-3">

<div class="unit-img">
<div class="preload-img"></div>
</div>

<div class="frames-img"></div>
<div class="unit-idle-effects">
<div class="unit-idle-effect-1"></div>
<div class="unit-idle-effect-2"></div>
</div>
<div class="attack-plume"></div>
<div class="cast-plume"></div>
<div class="cast-img-wrap">
<div class="cast-img-1"></div>
<div class="cast-img-2"></div>
<div class="cast-img-3"></div>
<div class="cast-img-4"></div>
</div>
</div>
</div>
</div>
<div class="unit-hp" id="idb5">
<div class="unit-hp-fill" style="width: 36%" id="idb6"></div>
<div class="unit-amount" id="idb7" title="0">8</div>
</div>

<div class="unit-death-img"></div>
</div>
<a class="unit-link" draggable="false" id="id39" ignoreWebView="true" href="javascript:;"></a>
<div class="unit-buffs" id="idb8">


<div class="buff" id="idb9">
<div>
<img class="buff-img" width="12" height="12" src="/images/icons/enchant.png">
<div class="buff-counter">
<svg version="1.1" baseProfile="full" class="circle-progress-fill" xmlns="http://www.w3.org/2000/svg" id="idba">
<circle cx="50%" cy="50%" r="43%" style="stroke-dasharray: 282%, 300%;"></circle>
</svg>
</div>
</div>
</div>

<div class="buff" id="idbb">
<div>
<img class="buff-img" width="12" height="12" src="/images/icons/keeper.png">
<div class="buff-counter">
<svg version="1.1" baseProfile="full" class="circle-progress-fill" xmlns="http://www.w3.org/2000/svg" id="idbc">
<circle cx="50%" cy="50%" r="43%" style="stroke-dasharray: 209%, 300%;"></circle>
</svg>
</div>
</div>
</div>

</div>
<div class="unit-pets" id="idbd">

</div>
</div>
</div>
</div><div class="place" id="idbe">
<div class="place-proj-img"></div>
<div class="place-combat-text"></div>
<div class="combat-entity-panel" id="idbf">
<div class="unit _unit-pos-22" id="unit_0__unit-pos-22">
<div style="display:none;" id="idc0"></div>
<div class="unit-show _keeper _boss _own-death _current _health75" id="idc1">
<div class="unit-strip-props"></div>
<div class="unit-attack-props">
<div class="unit-attack-1">
<div class="unit-shoot"></div>
</div>
<div class="unit-attack-2">
<div class="unit-shoot"></div>
</div>
</div>
<div class="unit-cast-props">
<div class="unit-cast-1">
<div class="unit-shoot"></div>
</div>
<div class="unit-cast-2">
<div class="unit-shoot"></div>
</div>
</div>
<div class="unit-death-props">
<div class="death-props-explosion"></div>
<div class="death-props-smoke"></div>
<div class="death-props-particles"></div>
<div class="death-props-spots"></div>
<div class="death-props-drops"></div>
</div>

<div class="unit-layer-1">
<div class="get-img-1"></div>
<div class="get-img-2"></div>
<div class="get-img-3"></div>
<div class="bite-img-1"></div>
<div class="bite-img-2"></div>
<div class="buff-img-1"></div>
<div class="buff-img-2"></div>
<div class="buff-img-3"></div>
<div class="debuff-img-1"></div>
<div class="debuff-img-2"></div>
<div class="debuff-img-3"></div>
<div class="cast-aura-1"></div>
<div class="get-aura-1"></div>
<div class="proc-img-1"></div>
<div class="unit-marker"></div>
<div class="unit-layer-2">
<div class="unit-talk"></div>
<div class="unit-layer-3">

<img id="idc2" style="display:none"></img>
<div class="unit-img" id="idc3">
<div class="preload-img"></div>
</div>

<div class="frames-img"></div>
<div class="unit-idle-effects">
<div class="unit-idle-effect-1"></div>
<div class="unit-idle-effect-2"></div>
</div>
<div class="attack-plume"></div>
<div class="cast-plume"></div>
<div class="cast-img-wrap">
<div class="cast-img-1"></div>
<div class="cast-img-2"></div>
<div class="cast-img-3"></div>
<div class="cast-img-4"></div>
</div>
</div>
</div>
</div>
<div class="unit-hp" id="idc4">
<div class="unit-hp-fill" style="width: 75%" id="idc5"></div>
<div class="unit-amount" id="idc6" title="0">1</div>
</div>

<div class="unit-death-img"></div>
</div>
<a class="unit-link" draggable="false" id="id3a" ignoreWebView="true" href="javascript:;" title=""></a>
<div class="unit-buffs" id="idc7">


</div>
<div class="unit-pets" id="idc8">

</div>
</div>
</div>
</div><div class="place" id="idc9">
<div class="place-proj-img"></div>
<div class="place-combat-text"></div>
<div class="combat-entity-panel" id="idca">
<div class="unit _unit-pos-23" id="unit_0__unit-pos-23">
<div style="display:none;" id="idcb"></div>
<div class="unit-show _warrior _tlm _fleshlike" id="idcc">
<div class="unit-strip-props"></div>
<div class="unit-attack-props">
<div class="unit-attack-1">
<div class="unit-shoot"></div>
</div>
<div class="unit-attack-2">
<div class="unit-shoot"></div>
</div>
</div>
<div class="unit-cast-props">
<div class="unit-cast-1">
<div class="unit-shoot"></div>
</div>
<div class="unit-cast-2">
<div class="unit-shoot"></div>
</div>
</div>
<div class="unit-death-props">
<div class="death-props-explosion"></div>
<div class="death-props-smoke"></div>
<div class="death-props-particles"></div>
<div class="death-props-spots"></div>
<div class="death-props-drops"></div>
</div>

<div class="unit-layer-1">
<div class="get-img-1"></div>
<div class="get-img-2"></div>
<div class="get-img-3"></div>
<div class="bite-img-1"></div>
<div class="bite-img-2"></div>
<div class="buff-img-1"></div>
<div class="buff-img-2"></div>
<div class="buff-img-3"></div>
<div class="debuff-img-1"></div>
<div class="debuff-img-2"></div>
<div class="debuff-img-3"></div>
<div class="cast-aura-1"></div>
<div class="get-aura-1"></div>
<div class="proc-img-1"></div>
<div class="unit-marker"></div>
<div class="unit-layer-2">
<div class="unit-talk"></div>
<div class="unit-layer-3">

<div class="unit-img">
<div class="preload-img"></div>
</div>

<div class="frames-img"></div>
<div class="unit-idle-effects">
<div class="unit-idle-effect-1"></div>
<div class="unit-idle-effect-2"></div>
</div>
<div class="attack-plume"></div>
<div class="cast-plume"></div>
<div class="cast-img-wrap">
<div class="cast-img-1"></div>
<div class="cast-img-2"></div>
<div class="cast-img-3"></div>
<div class="cast-img-4"></div>
</div>
</div>
</div>
</div>
<div class="unit-hp" id="idcd">
<div class="unit-hp-fill" style="width: 86%" id="idce"></div>
<div class="unit-amount" id="idcf" title="0">6</div>
</div>

<div class="unit-death-img"></div>
</div>
<a class="unit-link" draggable="false" id="id3b" ignoreWebView="true" href="javascript:;"></a>
<div class="unit-buffs" id="idd0">


<div class="buff" id="idd1">
<div>
<img class="buff-img" width="12" height="12" src="/images/icons/enchant.png">
<div class="buff-counter">
<svg version="1.1" baseProfile="full" class="circle-progress-fill" xmlns="http://www.w3.org/2000/svg" id="idd2">
<circle cx="50%" cy="50%" r="43%" style="stroke-dasharray: 282%, 300%;"></circle>
</svg>
</div>
</div>
</div>

<div class="buff" id="idd3">
<div>
<img class="buff-img" width="12" height="12" src="/images/icons/keeper.png">
<div class="buff-counter">
<svg version="1.1" baseProfile="full" class="circle-progress-fill" xmlns="http://www.w3.org/2000/svg" id="idd4">
<circle cx="50%" cy="50%" r="43%" style="stroke-dasharray: 209%, 300%;"></circle>
</svg>
</div>
</div>
</div>

</div>
<div class="unit-pets" id="idd5">

</div>
</div>
</div>
</div><div class="place" id="idd6">
<div class="place-proj-img"></div>
<div class="place-combat-text"></div>
<div class="combat-entity-panel" id="idd7">
<div class="unit _unit-pos-24" id="unit_0__unit-pos-24">
<div style="display:none;" id="idd8"></div>
<div class="unit-show _monk _tlm _fleshlike" id="idd9">
<div class="unit-strip-props"></div>
<div class="unit-attack-props">
<div class="unit-attack-1">
<div class="unit-shoot"></div>
</div>
<div class="unit-attack-2">
<div class="unit-shoot"></div>
</div>
</div>
<div class="unit-cast-props">
<div class="unit-cast-1">
<div class="unit-shoot"></div>
</div>
<div class="unit-cast-2">
<div class="unit-shoot"></div>
</div>
</div>
<div class="unit-death-props">
<div class="death-props-explosion"></div>
<div class="death-props-smoke"></div>
<div class="death-props-particles"></div>
<div class="death-props-spots"></div>
<div class="death-props-drops"></div>
</div>

<div class="unit-layer-1">
<div class="get-img-1"></div>
<div class="get-img-2"></div>
<div class="get-img-3"></div>
<div class="bite-img-1"></div>
<div class="bite-img-2"></div>
<div class="buff-img-1"></div>
<div class="buff-img-2"></div>
<div class="buff-img-3"></div>
<div class="debuff-img-1"></div>
<div class="debuff-img-2"></div>
<div class="debuff-img-3"></div>
<div class="cast-aura-1"></div>
<div class="get-aura-1"></div>
<div class="proc-img-1"></div>
<div class="unit-marker"></div>
<div class="unit-layer-2">
<div class="unit-talk"></div>
<div class="unit-layer-3">

<div class="unit-img">
<div class="preload-img"></div>
</div>

<div class="frames-img"></div>
<div class="unit-idle-effects">
<div class="unit-idle-effect-1"></div>
<div class="unit-idle-effect-2"></div>
</div>
<div class="attack-plume"></div>
<div class="cast-plume"></div>
<div class="cast-img-wrap">
<div class="cast-img-1"></div>
<div class="cast-img-2"></div>
<div class="cast-img-3"></div>
<div class="cast-img-4"></div>
</div>
</div>
</div>
</div>
<div class="unit-hp" id="idda">
<div class="unit-hp-fill" style="width: 79%" id="iddb"></div>
<div class="unit-amount" id="iddc" title="0">2</div>
</div>

<div class="unit-death-img"></div>
</div>
<a class="unit-link" draggable="false" id="id3c" ignoreWebView="true" href="javascript:;"></a>
<div class="unit-buffs" id="iddd">


<div class="buff" id="idde">
<div>
<img class="buff-img" width="12" height="12" src="/images/icons/enchant.png">
<div class="buff-counter">
<svg version="1.1" baseProfile="full" class="circle-progress-fill" xmlns="http://www.w3.org/2000/svg" id="iddf">
<circle cx="50%" cy="50%" r="43%" style="stroke-dasharray: 282%, 300%;"></circle>
</svg>
</div>
</div>
</div>

<div class="buff" id="ide0">
<div>
<img class="buff-img" width="12" height="12" src="/images/icons/keeper.png">
<div class="buff-counter">
<svg version="1.1" baseProfile="full" class="circle-progress-fill" xmlns="http://www.w3.org/2000/svg" id="ide1">
<circle cx="50%" cy="50%" r="43%" style="stroke-dasharray: 209%, 300%;"></circle>
</svg>
</div>
</div>
</div>

</div>
<div class="unit-pets" id="ide2">

</div>
</div>
</div>
</div><div class="place" id="ide3">
<div class="place-proj-img"></div>
<div class="place-combat-text"></div>
<div class="combat-entity-panel" id="ide4"></div>
</div>
<div class="side-effect-1"></div>
<div class="side-effect-2"></div>
<div class="side-effect-3"></div>
</div>
</div>
</div>
</div>
<div class="area-control" id="ide5" style="display: none;">
<div id="showScrollDebug" style="position: absolute; z-index: 1000; width: 100%;left: 0;top:36px;text-align: center"></div>
<div id="controlLinkLeft" class="area-control-left"></div>
<div class="area-control-position">
<div class="area-position-tag _danger" id="ide6"></div>
</div>
<div id="controlLinkRight" class="area-control-right"></div>
<a style="display: none;" id="id35" ignoreWebView="true" href="javascript:;"></a>
</div>
    <script type="text/javascript">
    (() => {
        'use strict';
        let battlefield = document.getElementById('btfWrapper'),
            bfWidth = battlefield.offsetWidth,
            areas = document.getElementsByClassName('area'),
            areaControl = {
                left: document.querySelector('.area-control-left'),
                right: document.querySelector('.area-control-right'),
            },
            posMax = areas.length - 1,
            posMiddle = (areas.length - 1) / 2,
            areasMarginTop = 15.835 / areas.length,
            storedPosition = -1,
            pos = 0,
            posReportTiming = (+new Date);

        let reSize = () => {
            try {
                bfWidth = battlefield.offsetWidth;
                storedPosition < 0 ?
                    pos = bfWidth * posMiddle :
                    pos = bfWidth * storedPosition;

                let w = bfWidth + 'px', m = areasMarginTop + '%';

                for (let i = 0; i < areas.length; i++) {
                    areas[i].style.width = w;
                    areas[i].style.marginTop = m;
                }

                battlefield.scrollLeft = pos;
            } catch (e) {
                console.error(e);
            }
        }

        Ptx.eventListenerAddPB(window, 'load', reSize, undefined, true);
        Ptx.eventListenerAddPB(window, 'resize', reSize);
        Ptx.eventListenerAddPB(window, 'orientationchange', reSize);

        let addAreaCurrentPosition = (currentPosition) => {
            let el = document.getElementsByClassName('area-position-tag');

            for (let i = 0; i < (el.length); i = i + 1) {
                i === currentPosition ?
                    el[i].classList.add('_current') :
                    el[i].classList.remove('_current');
            }
        }

        if (areaControl.left !== null && areaControl.right !== null) {
            let scrolledN = -1;
            battlefield.onscroll = () => {
                let scrolled = battlefield.pageXOffset || battlefield.scrollLeft;

                if (scrolledN >= 0 && Math.abs(scrolled - scrolledN) < 10) {
                    return;
                }

                scrolledN = scrolled;

                let pos = Math.round(scrolled / bfWidth);

                if (pos < 0) {
                    pos = 0;
                } else if (pos > posMax) {
                    pos = posMax;
                }

                addAreaCurrentPosition(pos);

                pos === 0 ?
                    areaControl.left.classList.add('_lock') :
                    areaControl.left.classList.remove('_lock');
                pos >= posMax ?
                    areaControl.right.classList.add('_lock') :
                    areaControl.right.classList.remove('_lock');

                try {
                    let nowMilliseconds = (+new Date);

                    if (nowMilliseconds - posReportTiming > 200) {
                        posReportTiming = nowMilliseconds;
                        let lnk = document.getElementById('id35');
                        lnk.dispatchEvent(new Event("click"));
                    }
                } catch (e) {
                    console.error('Report back failed: ', e);
                }
            };

            areaControl.left.onclick = function () {
                let delta = battlefield.scrollLeft;
                delta % bfWidth === 0 ?
                    battlefield.scrollLeft = delta - bfWidth :
                    battlefield.scrollLeft = delta - (delta % bfWidth);
            };

            areaControl.right.onclick = function () {
                let delta = battlefield.scrollLeft;
                delta % bfWidth === 0 ?
                    battlefield.scrollLeft = delta + bfWidth :
                    battlefield.scrollLeft = delta + (bfWidth - (delta % bfWidth));
            };
        }

        reSize();
    })();
    </script>
    
<div class="battlefield-controls" id="ide7">
<span id="ide8"></span>
<div id="ide9">
<div class="ammo-counter" id="idea" style="display: none;"></div>
<div class="wrap-attack-button-link" id="ideb">
<div id="idec">
<a id="ptx_combat_rich2_attack_link" class="attack-button-link" draggable="false" ignoreWebView="true" href="javascript:;" title=""></a>
<div class="attack-button _attack-prepare" id="id3d">
<div class="attack-button-text" id="ided">1.1K</div>
<div class="wrap-attack-button-counter">
<svg version="1.1" baseProfile="full" class="attack-button-counter" xmlns="http://www.w3.org/2000/svg" id="idee">
<circle cx="50%" cy="50%" r="45%" style="stroke-dasharray: 61%, 300%;" id="idef"></circle>
</svg>
</div>
</div>
<div class="time-counter" id="idf0" style="display: none;"></div>
</div>
<div class="control-effect">
<div class="control-effect-part"></div>
<div class="control-effect-part"></div>
</div>
</div>
<div class="controls-pets" id="idf1" style="display: none;">

</div>
<div class="controls-skills">

<div class="wrap-skill-link _skill-pos-1 _time-lock" id="idf2">
<div id="idf3">
<a class="skill-link" draggable="false" id="id3e" ignoreWebView="true" href="javascript:;" title=" "></a>
<div class="skill-img _skill-img-talisman" id="id3f">
<div class="time-counter" id="idf4">00:15</div>
</div>
</div>
<div class="control-effect">
<div class="control-effect-part"></div>
<div class="control-effect-part"></div>
</div>
</div>

<div class="wrap-skill-link _skill-pos-2 _time-lock" id="idf5">
<div id="idf6">
<a class="skill-link" draggable="false" id="id40" ignoreWebView="true" href="javascript:;" title="  "></a>
<div class="skill-img _skill-img-lighting" id="id41">
<div class="time-counter" id="idf7">00:04</div>
</div>
</div>
<div class="control-effect">
<div class="control-effect-part"></div>
<div class="control-effect-part"></div>
</div>
</div>

<div class="wrap-skill-link _skill-pos-3 _time-lock" id="idf8">
<div id="idf9">
<a class="skill-link" draggable="false" id="id42" ignoreWebView="true" href="javascript:;" title=" "></a>
<div class="skill-img _skill-img-freezing" id="id43">
<div class="time-counter" id="idfa">00:00</div>
</div>
</div>
<div class="control-effect">
<div class="control-effect-part"></div>
<div class="control-effect-part"></div>
</div>
</div>

<div class="wrap-skill-link _skill-pos-4 _time-lock" id="idfb">
<div id="idfc">
<a class="skill-link" draggable="false" id="id44" ignoreWebView="true" href="javascript:;" title=" "></a>
<div class="skill-img _skill-img-rage" id="id45">
<div class="time-counter" id="idfd">00:12</div>
</div>
</div>
<div class="control-effect">
<div class="control-effect-part"></div>
<div class="control-effect-part"></div>
</div>
</div>

<div class="wrap-skill-link _skill-pos-5 _time-lock" id="idfe">
<div id="idff">
<a class="skill-link" draggable="false" id="id46" ignoreWebView="true" href="javascript:;" title=" "></a>
<div class="skill-img _skill-img-dodge" id="id47">
<div class="time-counter" id="id100">00:04</div>
</div>
</div>
<div class="control-effect">
<div class="control-effect-part"></div>
<div class="control-effect-part"></div>
</div>
</div>

</div>

<div class="controls-potions">

<div class="wrap-potion-link _potion-pos-1" id="id101">
<div id="id102">
<a class="potion-link" draggable="false" id="id48" ignoreWebView="true" href="javascript:;" title=""></a>
<div class="potion-link-img" id="id49">
<img alt="" src="/images/potions/Potions_crit_3_32.png" class="p32img">
<div class="time-counter" id="id103">00:00</div>
</div>
</div>
<div class="control-effect">
<div class="control-effect-part"></div>
<div class="control-effect-part"></div>
</div>
</div>

<div class="wrap-potion-link _potion-pos-2" id="id104">
<div id="id105">
<a class="potion-link" draggable="false" id="id4a" ignoreWebView="true" href="javascript:;" title="  "></a>
<div class="potion-link-img" id="id4b">
<img alt="" src="/images/potions/Unic_Antidot_32.png" class="p32img">
<div class="time-counter" id="id106">00:00</div>
</div>
</div>
<div class="control-effect">
<div class="control-effect-part"></div>
<div class="control-effect-part"></div>
</div>
</div>

<div class="wrap-potion-link _potion-pos-3" id="id107">
<div id="id108">
<a class="potion-link" draggable="false" id="id4c" ignoreWebView="true" href="javascript:;" title=" "></a>
<div class="potion-link-img" id="id4d">
<img alt="" src="/images/potions/Potions_str_2_32.png" class="p32img">
<div class="time-counter" id="id109">00:00</div>
</div>
</div>
<div class="control-effect">
<div class="control-effect-part"></div>
<div class="control-effect-part"></div>
</div>
</div>

</div>

<div class="controls-devices">

<div class="wrap-device-link _device-pos-1" id="id10a">
<div id="id10b">
<a class="device-link" draggable="false" id="id4e" ignoreWebView="true" href="javascript:;" title="  "></a>
<div class="device-link-img _time-lock" id="id4f">
<img width="32" height="32" alt="." border="0" src="/images/items/icons/icon_ny_crystal_32.png">
<div class="time-counter" id="id10c">00:00</div>
<div class="charge-display" id="id10d" style="display: none;"></div>
</div>
</div>
<div class="control-effect">
<div class="control-effect-part"></div>
<div class="control-effect-part"></div>
</div>
</div>

<div class="wrap-device-link _device-pos-2" id="id10e">
<div id="id10f">
<a class="device-link" draggable="false" id="id50" ignoreWebView="true" href="javascript:;" title="  "></a>
<div class="device-link-img _time-lock" id="id51">
<img width="32" height="32" alt="." border="0" src="/images/items/icons/icon_artifact_mask_2.png">
<div class="time-counter" id="id110">00:00</div>
<div class="charge-display" id="id111" style="display: none;"></div>
</div>
</div>
<div class="control-effect">
<div class="control-effect-part"></div>
<div class="control-effect-part"></div>
</div>
</div>

<div class="wrap-device-link _device-pos-3" id="id112">
<div id="id113">
<a class="device-link" draggable="false" id="id52" ignoreWebView="true" href="javascript:;" title="  I"></a>
<div class="device-link-img _time-lock" id="id53">
<img width="32" height="32" alt="." border="0" src="/images/event/FireTower/icon_shadow-mirror-1_32.png">
<div class="time-counter" id="id114">00:00</div>
<div class="charge-display" id="id115" style="display: none;"></div>
</div>
</div>
<div class="control-effect">
<div class="control-effect-part"></div>
<div class="control-effect-part"></div>
</div>
</div>

</div>
</div>
<script type="text/javascript">
    (() => {
        let el = Ptx.nvlC(document.querySelector('.wrap-battlefield'), (e) => e.querySelector('.battlefield-controls'));

        if (!el || el.onclick === null) {
            Ptx.performOnLoad(() => {
                let el = Ptx.nvlC(document.querySelector('.wrap-battlefield'), (e) => e.querySelector('.battlefield-controls'));

                if (el && el.onclick === null) {
                    el.onclick = (ev) => {
                        Ptx.Shadows.Combat.worker.postMessage({ action: 'control_click', context: 'control_click' });
                        return true;
                    };
                }
            }, undefined, true);
        }
    })();
</script></div>
<div id="id116">
<div id="id117">

<span id="id118">
<div class="source-control">
<div class="source-control-title"></div>
<div class="source-control-hint"> ,    </div>
<div id="id119">
<div class="source-links">
<span>
<a class="source-link _magic _pos1 _side-light _current" id="id54" ignoreWebView="true" href="javascript:;">
<span class="source-link-img"></span>
<span class="source-link-players">
<span class="info" id="id11a">16</span> vs <span class="major" id="id11b">16</span>
</span>
</a>
</span><span>
<a class="source-link _strength _pos2 _side-light _lock" id="id55" ignoreWebView="true" href="javascript:;">
<span class="source-link-img"></span>
<span class="source-link-players">
<span class="info" id="id11c">8</span> vs <span class="major" id="id11d">9</span>
</span>
</a>
</span><span>
<a class="source-link _soul _pos3 _side-light _lock" id="id56" ignoreWebView="true" href="javascript:;">
<span class="source-link-img"></span>
<span class="source-link-players">
<span class="info" id="id11e">9</span> vs <span class="major" id="id11f">12</span>
</span>
</a>
</span><span>
<a class="source-link _health _pos4 _side-dark _lock" id="id57" ignoreWebView="true" href="javascript:;">
<span class="source-link-img"></span>
<span class="source-link-players">
<span class="info" id="id120">9</span> vs <span class="major" id="id121">10</span>
</span>
</a>
</span><span>
<a class="source-link _energy _pos5 _side-light _lock" id="id58" ignoreWebView="true" href="javascript:;">
<span class="source-link-img"></span>
<span class="source-link-players">
<span class="info" id="id122">19</span> vs <span class="major" id="id123">20</span>
</span>
</a>
</span><span>
<a class="source-link _dark _pos6 _side-dark _lock" id="id59" ignoreWebView="true" href="javascript:;">
<span class="source-link-img"></span>
<span class="source-link-players">
<span class="info" id="id124">7</span> vs <span class="major" id="id125">6</span>
</span>
</a>
</span>
</div>
</div>
</div>
</span>

<span id="id126">
<div class="basin-rating">
<div class="section-title _font-art"> </div>
<div id="id127">
<div>
<span>1</span>.<img src="/images/icons/giftshop.png" width="12" height="12" alt=""/><span><span class="ctx_userlink"><span class="u12 u12-user_2_3"></span><a href="https://vmmo.vten.ru/user/239299464?u=https://vmmo.vten.ru/basin/combat%3F10"><span>Qing Dynasty</span></a></span></span> <span
class="small;">(<span>0</span>)</span>
</div>
<div style="display: none;">
...
</div>
<div style="display: none;">
<span>1</span>. <span><span class="ctx_userlink"><span class="u12 u12-user_2_3"></span><a href="https://vmmo.vten.ru/user/239299464?u=https://vmmo.vten.ru/basin/combat%3F10"><span>Qing Dynasty</span></a></span></span> <span class="small;">(<span>0</span>)</span>
</div>
</div>
</div>
</span>

</div>
</div>
<div class="battlefield-log" id="id128">
<div id="id129">

<span id="id12a">
<ol id="fightLog">

</ol>
</span>

</div>
</div>
</div>
</div></div>


<div class="mt5 mb5 center"><i><img src="/images/icons/question_blue.png" width="12" height="12" class="link-icon"/><a class="" href="https://vmmo.vten.ru/basin/rules"></a></i></div>







<div id="id12b" style="display:none"></div>
<div>
</div>


<span style="display: none;">
<div class="info-box _questFooter">
<a class="info-box-open-link" href="https://vmmo.vten.ru/basin/combat?10-1.ILinkListener.0-questFooter-toggleFoldStateLink&amp;ppAction=foldQuest"></a>
<div class="pb10" style="display: none;">
<span class="c-low"> ...</span>
<table border="0" cellpadding="0" cellspacing="0" width="100%" class="mt10">
<tbody><tr>
<td width="30" valign="top">
<img src="/images/menu/question.png" alt="">
</td>
<td valign="top">
<div>

</div>
<div>
<span style="display: none;">
<span>
:
<span class="nowrap" id="id12c" style="display: none;">
0
<span>
<span>
<span class="i12 i12-money_gold"></span>
<span>0</span>
</span>

</span>
<span>/</span>
<span>
<span>
<span class="i12 i12-money_gold"></span>
<span>0</span>
</span>

</span>

</span>


 

</span>
</span>
</div>
<div>
<img src="/images/icons/cross.png" alt="">
<a class="c-low" href="https://vmmo.vten.ru/basin/combat?10-1.ILinkListener.0-questFooter-unfoldedBlock-cancelLink&amp;ppAction=cancelQuest">  </a>
</div>
</td>
<td width="82" align="right">
<span class="foot-info-link">
<div class="mt10">
 
</div>
</span>
</td>
</tr>
</tbody>
</table>
</div>
<img src="/images/menu/question.png" alt=""> <span class="c-low">
<span class="task-btn-text" style="display: none;">
<span>
:
<span class="nowrap" id="id12d" style="display: none;">
0
<span>
<span>
<span class="i12 i12-money_gold"></span>
<span>0</span>
</span>

</span>
<span>/</span>
<span>
<span>
<span class="i12 i12-money_gold"></span>
<span>0</span>
</span>

</span>

</span>


 

</span>
</span>
</span>

</div>
</span>








<div class="main-menu">
<div class="main-menu-ava" style="background-image: url(&#039;/manekenimage/hd/x278/y57/w65/h65/decorBg:Under_back_Profile_640_380/mnkfhdd02:body-d_f_skin-0/mnkfd02:body-d_f_cloth-0/ifch00:20_Ice_chestF/ishldr00:Laty1/ihd00:ShlemDoblesti/ish00:EpicTitanShield/iwpn00:20_Ice_gun/iartfus2:artifact_mask_2_640/624811464.jpg&#039;)" id="id12e"></div>
<div class="main-menu-bg"></div>
<a class="main-menu-link _profile _18" title="" href="https://vmmo.vten.ru/user/239299464?u=https://vmmo.vten.ru/basin/combat%3F10" data-on-click-sound="ui profile-open">
<span class="link-img"></span>
<span class="link-effect"></span>
<span class="link-title"></span>

<span class="main-menu-lvl">29 .</span>
</a>

<div class="main-menu-exp">
<div class="main-menu-exp-inner">
<div class="main-menu-exp-fill" style="width: 60%;width:32%"></div>
<div class="main-menu-exp-end"></div>
</div>
</div>

<a class="main-menu-link _1 _19 _map" title=" " href="https://vmmo.vten.ru/cities?continent=0" data-on-click-sound="ui profile-open">
<span class="link-img"></span>
<span class="link-effect"></span>
<span class="link-title"></span>
</a>
<a class="main-menu-link _2 _mansion _18" title=" " href="https://vmmo.vten.ru/city" data-on-click-sound="ui profile-open">
<span class="link-img"></span>
<span class="link-effect"></span>
<span class="link-title"></span>

</a>
<a class="main-menu-link _3 _guild" title="" href="https://vmmo.vten.ru/guild/autosearch" data-on-click-sound="ui profile-open">
<span class="link-img"></span>
<span class="link-effect"></span>
<span class="link-title"></span>

</a>
<a class="main-menu-link _4 _18 _rack" title="" href="https://vmmo.vten.ru/user/rack?u=https://vmmo.vten.ru/basin/combat%3F10" data-on-click-sound="ui stranger-backpack-reduced">
<span class="link-img"></span>
<span class="link-effect"></span>
<span class="link-title"></span>
<span class="navigator _number">2</span>
<span class="link-text">13/34</span>
</a>
</div>








<div spa_ignore="true" ignoreWebView="true"><span class="">

</span></div>
</div>



<div>
<div></div>
</div>

<script src="/scripts/ux.js?v=1765963391098" type="text/javascript" drop_on_unload="true"></script><script src="/scripts/preload.js?v=1765963391098" type="text/javascript" drop_on_unload="true"></script><script src="/scripts/fight-rich2_20.js?v=1765963391098" type="text/javascript" drop_on_unload="true"></script><script type="text/javascript">
    (() => {
        'use strict';
        if (!window.Ptx) {
            window.Ptx = {};
        }

        if (!Ptx.Utils) {
            Ptx.Utils = {};
        }

        Ptx.performOnLoadPB(() => {
            if (Ptx.Utils.leash) {
                if (!Ptx.Utils.leash.itvlIdx) {
                    Ptx.Utils.leash.itvlIdx = Ptx.setInterval(
                        () => {
                            if (window.ptxIsCombatPage === true
                                || window.ptxUserLevel === 0
                                || window.ptxUserLevel >= 30) {
                                return;
                            }

                            console.debug('Searching for leashable elements');
                            const els = Array.from(document.querySelectorAll('._quest-leash'));

                            if (els
                                    && els.length > 0) {
                                console.debug(els.length, 'leashable elements found');

                                let max = 0;
                                let elM = null;

                                els.forEach((el) => {
                                    if (window.ptxElCheckVisibility(el) === false) {
                                        return;
                                    }

                                    let val = Number(Ptx.nvlC(el.dataset, (e) => e.leash) || 0);

                                    if (val && val > max) {
                                        max = val;
                                        elM = el;
                                    }
                                });

                                if (max > 0) {
                                    Ptx.Utils.leash.create({target: elM, priority: 10});
                                    console.debug('Created leash for ', elM)
                                } else {
                                    Ptx.Utils.leash.destroy();
                                }
                            } else {
                                console.debug('No leashable elements found');
                            }
                        },
                        1000,
                        () => {
                            Ptx.Utils.leash.destroy();
                            delete Ptx.Utils.leash.itvlIdx;
                        }
                    );
                }
            }
        }, undefined, true);
    })();
</script><script type="text/javascript">
        Ptx.eventListenerAddPB(document, 'DOMContentLoaded', () => {
            'use strict';

            if (!window.Ptx) {
                window.Ptx = {};
            }

            if (!Ptx.Ui) {
                Ptx.Ui = {};
            }

            if (!Ptx.Ui.urlQuicktipHandler) {
                Ptx.Ui.urlQuicktipHandler = (ev) => {
                    if(ev.target.dataset.quicktip) {
                        Ptx.Utils.Quicktip.create({target: ev.target});
                        ev.preventDefault();
                        ev.stopPropagation();
                        ev.stopImmediatePropagation();
                        return false;
                    }
                    if (Ptx.Utils.Quicktip.el && !Ptx.Utils.Quicktip.el.contains(ev.target) && !Ptx.Utils.Quicktip.el.scrollbar?.active) {
                        Ptx.Utils.Quicktip.destroy()
                    }

                    return null;
                }
            }
        })();
    </script><script type="text/javascript">
    (() => {
        'use strict';
        Ptx.performOnLoadPB(() => {
            try {
                var bodyId = document.getElementById('body_id');

                if (bodyId) {
                    if ("_dark-side".length > 0) {
                        if (bodyId.classList.contains("_light-side")) {
                            bodyId.classList.remove("_light-side");
                        }
                        if(bodyId.classList.contains("_dark-side")) {
                            bodyId.classList.remove("_dark-side");
                        }
                        bodyId.classList.add("_dark-side");
                       }
                       else {
                         console.warn('Body class settings failed because of empty class name')
                       }
                }
            } catch (e) {
                console.error('Body class set failed: ', e);
            }
        }, undefined, true);
    })();
    </script><script type="text/javascript">try {
        var elU = document.getElementById('id81').parentNode.querySelector('.place-combat-text');

        if (elU) {
            elU.className = 'place-combat-text ' + '_unit-pos-12';
        }
    } catch (e) {}</script><script type="text/javascript">(() => {
    'use strict';
    var unitSrc = document.getElementById('unit_0__unit-pos-12');
    var unitDst = document.getElementById('unit_0__unit-pos-22');
    var idPlSrc = Ptx.nvlC(Ptx.Shadows.Rich2.getPlaceBlockU(unitSrc), (e) => e.id);
    var idPlDst = Ptx.nvlC(Ptx.Shadows.Rich2.getPlaceBlockU(unitDst), (e) => e.id);
    Ptx.setTimeout(() => {
        if (document.hidden === false) {
            Ptx.Shadows.Combat.Animate.unitStrip({fromPlace: idPlSrc, fromUnit: unitSrc, toPlace: idPlDst, type: 'attack', priority: 60});
            try { trySound('_monk _tdm _fleshlike _attack'); } catch (e) {}
        }
    }, 0);
    Ptx.setTimeout(() => {
        if (document.hidden === false) {
            try { trySound("_keeper _boss _own-death _bite _from-monk"); } catch (e) {}
        }
    }, 100);
    Ptx.setTimeout(() => {
        if (document.hidden === false) {
            Ptx.Shadows.Combat.Animate.unitEffect({fromPlace: idPlDst, fromUnit: unitDst, toPlace: idPlSrc, type: 'bite', subtype: 'monk'});
        }
    }, 100);
    Ptx.setTimeout(() => {
        if (document.hidden === false) {
            Ptx.Shadows.Rich2.addCombatText(Ptx.Shadows.Rich2.getTextBlockU(unitDst), '288', '_0', '');
        }
    }, 100);
})();</script><script type="text/javascript">try {
        var elU = document.getElementById('id8c').parentNode.querySelector('.place-combat-text');

        if (elU) {
            elU.className = 'place-combat-text ' + '_unit-pos-13';
        }
    } catch (e) {}</script><script type="text/javascript">(() => {
    'use strict';
    var unitSrc = document.getElementById('unit_0__unit-pos-13');
    var unitDst = document.getElementById('unit_0__unit-pos-22');
    var idPlSrc = Ptx.nvlC(Ptx.Shadows.Rich2.getPlaceBlockU(unitSrc), (e) => e.id);
    var idPlDst = Ptx.nvlC(Ptx.Shadows.Rich2.getPlaceBlockU(unitDst), (e) => e.id);
    Ptx.setTimeout(() => {
        if (document.hidden === false) {
            Ptx.Shadows.Combat.Animate.unitStrip({fromPlace: idPlSrc, fromUnit: unitSrc, toPlace: idPlDst, type: 'attack', priority: 60});
            try { trySound('_warrior _tdm _fleshlike _attack'); } catch (e) {}
        }
    }, 0);
    Ptx.setTimeout(() => {
        if (document.hidden === false) {
            try { trySound("_keeper _boss _own-death _bite _from-warrior"); } catch (e) {}
        }
    }, 100);
    Ptx.setTimeout(() => {
        if (document.hidden === false) {
            Ptx.Shadows.Combat.Animate.unitEffect({fromPlace: idPlDst, fromUnit: unitDst, toPlace: idPlSrc, type: 'bite', subtype: 'warrior'});
        }
    }, 100);
    Ptx.setTimeout(() => {
        if (document.hidden === false) {
            Ptx.Shadows.Rich2.addCombatText(Ptx.Shadows.Rich2.getTextBlockU(unitDst), '74', '_0', '');
        }
    }, 100);
})();</script><script type="text/javascript">try {
        var elU = document.getElementById('id97').parentNode.querySelector('.place-combat-text');

        if (elU) {
            elU.className = 'place-combat-text ' + '_unit-pos-14';
        }
    } catch (e) {}</script><script type="text/javascript">try { Ptx.Shadows.Combat.unitAppear({placeId: Ptx.nvlC(Ptx.Shadows.Rich2.getPlaceBlock('unit_0__unit-pos-14'), (e) => e.id), amount: 1, appearTs: 13161620867807}); } catch (e) {}</script><script type="text/javascript">try {
        var elU = document.getElementById('ida5').parentNode.querySelector('.place-combat-text');

        if (elU) {
            elU.className = 'place-combat-text ' + '_unit-pos-15';
        }
    } catch (e) {}</script><script type="text/javascript">(() => {
    'use strict';
    var unitSrc = document.getElementById('unit_0__unit-pos-15');
    var unitDst = document.getElementById('unit_0__unit-pos-22');
    var idPlSrc = Ptx.nvlC(Ptx.Shadows.Rich2.getPlaceBlockU(unitSrc), (e) => e.id);
    var idPlDst = Ptx.nvlC(Ptx.Shadows.Rich2.getPlaceBlockU(unitDst), (e) => e.id);
    Ptx.setTimeout(() => {
        if (document.hidden === false) {
            Ptx.Shadows.Combat.Animate.unitStrip({fromPlace: idPlSrc, fromUnit: unitSrc, toPlace: idPlDst, type: 'attack', priority: 60});
            try { trySound('_mage _tdm _fleshlike _attack'); } catch (e) {}
        }
    }, 0);
    Ptx.setTimeout(() => {
        if (document.hidden === false) {
            try { trySound("_keeper _boss _own-death _bite _from-mage"); } catch (e) {}
        }
    }, 100);
    Ptx.setTimeout(() => {
        if (document.hidden === false) {
            Ptx.Shadows.Combat.Animate.unitEffect({fromPlace: idPlDst, fromUnit: unitDst, toPlace: idPlSrc, type: 'bite', subtype: 'mage'});
        }
    }, 100);
    Ptx.setTimeout(() => {
        if (document.hidden === false) {
            Ptx.Shadows.Rich2.addCombatText(Ptx.Shadows.Rich2.getTextBlockU(unitDst), '3417', '_0', '');
        }
    }, 100);
})();</script><script type="text/javascript">try {
        var elU = document.getElementById('idb2').parentNode.querySelector('.place-combat-text');

        if (elU) {
            elU.className = 'place-combat-text ' + '_unit-pos-21';
        }
    } catch (e) {}</script><script type="text/javascript">try {
        var elU = document.getElementById('idbf').parentNode.querySelector('.place-combat-text');

        if (elU) {
            elU.className = 'place-combat-text ' + '_unit-pos-22';
        }
    } catch (e) {}</script><script type="text/javascript">try {
        var elU = document.getElementById('idca').parentNode.querySelector('.place-combat-text');

        if (elU) {
            elU.className = 'place-combat-text ' + '_unit-pos-23';
        }
    } catch (e) {}</script><script type="text/javascript">try {
        var elU = document.getElementById('idd7').parentNode.querySelector('.place-combat-text');

        if (elU) {
            elU.className = 'place-combat-text ' + '_unit-pos-24';
        }
    } catch (e) {}</script>
<span id="pageBottomA"></span>
</body>
</html>
